#!/usr/bin/env node
import*as e from"node:path";import t from"node:path";import n from"node:process";import*as r from"@clack/prompts";import{randomUUID as i,webcrypto as s}from"node:crypto";import{Effect as o,Data as a}from"effect";import{WriteStream as l}from"node:tty";import*as c from"node:fs/promises";import u from"node:fs/promises";import*as p from"node:fs";import d from"node:fs";import{exec as f}from"node:child_process";import h from"node:util";import*as g from"diff";import{detect as m}from"@antfu/ni";import y from"node:os";import{parse as _}from"@babel/parser";import*as b from"recast";import{visit as v,namedTypes as S,builders as E}from"ast-types";import{Axiom as x}from"@axiomhq/js";var w,A,k=Object.create,R=Object.defineProperty,P=Object.getOwnPropertyDescriptor,C=Object.getOwnPropertyNames,O=Object.getPrototypeOf,$=Object.prototype.hasOwnProperty,T=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)((function(e){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')})),L=(e,t)=>function(){return t||(0,e[C(e)[0]])((t={exports:{}}).exports,t),t.exports},j=(e,t,n)=>(n=null!=e?k(O(e)):{},((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of C(t))$.call(e,i)||i===n||R(e,i,{get:()=>t[i],enumerable:!(r=P(t,i))||r.enumerable});return e})(e&&e.__esModule?n:R(n,"default",{value:e,enumerable:!0}),e)),M=L({"../../node_modules/.pnpm/ignore@5.3.2/node_modules/ignore/index.js"(e,t){function n(e){return Array.isArray(e)?e:[e]}var r=/^\s+$/,i=/(?:[^\\]|^)\\$/,s=/^\\!/,o=/^\\#/,a=/\r?\n/g,l=/^\.*\/|^\.+$/,c="node-ignore";"undefined"!=typeof Symbol&&(c=Symbol.for("node-ignore"));var u=c,p=/([0-z])-([0-z])/g,d=()=>!1,f=[[/^\uFEFF/,()=>""],[/((?:\\\\)*?)(\\?\s+)$/,(e,t,n)=>t+(0===n.indexOf("\\")?" ":"")],[/(\\+?)\s/g,(e,t)=>{const{length:n}=t;return t.slice(0,n-n%2)+" "}],[/[\\$.|*+(){^]/g,e=>`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,n)=>t+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(e,t,n)=>t+n.replace(/\\\*/g,"[^\\/]*")],[/\\\\\\(?=[$.|*+(){^])/g,()=>"\\"],[/\\\\/g,()=>"\\"],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(e,t,n,r,i)=>"\\"===t?`\\[${n}${(e=>{const{length:t}=e;return e.slice(0,t-t%2)})(r)}${i}`:"]"===i&&r.length%2==0?`[${(e=>e.replace(p,((e,t,n)=>t.charCodeAt(0)<=n.charCodeAt(0)?e:"")))(n)}${r}]`:"[]"],[/(?:[^*])$/,e=>/\/$/.test(e)?`${e}$`:`${e}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(e,t)=>`${t?`${t}[^/]+`:"[^/]*"}(?=$|\\/$)`]],h=Object.create(null),g=e=>"string"==typeof e,m=class{constructor(e,t,n,r){this.origin=e,this.pattern=t,this.negative=n,this.regex=r}},y=(e,t)=>{const n=e;let r=!1;0===e.indexOf("!")&&(r=!0,e=e.substr(1));const i=((e,t)=>{let n=h[e];return n||(n=f.reduce(((t,[n,r])=>t.replace(n,r.bind(e))),e),h[e]=n),t?new RegExp(n,"i"):new RegExp(n)})(e=e.replace(s,"!").replace(o,"#"),t);return new m(n,e,r,i)},_=(e,t)=>{throw new t(e)},b=(e,t,n)=>{if(!g(e))return n(`path must be a string, but got \`${t}\``,TypeError);if(!e)return n("path must not be empty",TypeError);if(b.isNotRelative(e)){return n(`path should be a ${"`path.relative()`d"} string, but got "${t}"`,RangeError)}return!0},v=e=>l.test(e);b.isNotRelative=v,b.convert=e=>e;var S=class{constructor({ignorecase:e=!0,ignoreCase:t=e,allowRelativePaths:n=!1}={}){var r,i,s;r=this,i=u,s=!0,Object.defineProperty(r,i,{value:s}),this._rules=[],this._ignoreCase=t,this._allowRelativePaths=n,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(e){if(e&&e[u])return this._rules=this._rules.concat(e._rules),void(this._added=!0);if((e=>e&&g(e)&&!r.test(e)&&!i.test(e)&&0!==e.indexOf("#"))(e)){const t=y(e,this._ignoreCase);this._added=!0,this._rules.push(t)}}add(e){return this._added=!1,n(g(e)?(e=>e.split(a))(e):e).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(e){return this.add(e)}_testOne(e,t){let n=!1,r=!1;return this._rules.forEach((i=>{const{negative:s}=i;if(r===s&&n!==r||s&&!n&&!r&&!t)return;i.regex.test(e)&&(n=!s,r=s)})),{ignored:n,unignored:r}}_test(e,t,n,r){const i=e&&b.convert(e);return b(i,e,this._allowRelativePaths?d:_),this._t(i,t,n,r)}_t(e,t,n,r){if(e in t)return t[e];if(r||(r=e.split("/")),r.pop(),!r.length)return t[e]=this._testOne(e,n);const i=this._t(r.join("/")+"/",t,n,r);return t[e]=i.ignored?i:this._testOne(e,n)}ignores(e){return this._test(e,this._ignoreCache,!1).ignored}createFilter(){return e=>!this.ignores(e)}filter(e){return n(e).filter(this.createFilter())}test(e){return this._test(e,this._testCache,!0)}},E=e=>new S(e);if(E.isPathValid=e=>b(e&&b.convert(e),e,d),E.default=E,t.exports=E,"undefined"!=typeof process&&(process.env&&process.env.IGNORE_TEST_WIN32||"win32"===process.platform)){const e=e=>/^\\\\\?\\/.test(e)||/["<>|\u0000-\u001F]+/u.test(e)?e:e.replace(/\\/g,"/");b.convert=e;const t=/^[a-z]:\//i;b.isNotRelative=e=>t.test(e)||v(e)}}}),F=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/utils/array.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.splitWhen=e.flatten=void 0,e.flatten=function(e){return e.reduce(((e,t)=>[].concat(e,t)),[])},e.splitWhen=function(e,t){const n=[[]];let r=0;for(const i of e)t(i)?(r++,n[r]=[]):n[r].push(i);return n}}}),N=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/utils/errno.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEnoentCodeError=void 0,e.isEnoentCodeError=function(e){return"ENOENT"===e.code}}}),I=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/utils/fs.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createDirentFromStats=void 0;var t=class{constructor(e,t){this.name=e,this.isBlockDevice=t.isBlockDevice.bind(t),this.isCharacterDevice=t.isCharacterDevice.bind(t),this.isDirectory=t.isDirectory.bind(t),this.isFIFO=t.isFIFO.bind(t),this.isFile=t.isFile.bind(t),this.isSocket=t.isSocket.bind(t),this.isSymbolicLink=t.isSymbolicLink.bind(t)}};e.createDirentFromStats=function(e,n){return new t(e,n)}}}),H=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/utils/path.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.convertPosixPathToPattern=e.convertWindowsPathToPattern=e.convertPathToPattern=e.escapePosixPath=e.escapeWindowsPath=e.escape=e.removeLeadingDotSegment=e.makeAbsolute=e.unixify=void 0;var t=T("os"),n=T("path"),r="win32"===t.platform(),i=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\()|\\(?![!()*+?@[\]{|}]))/g,s=/(\\?)([()[\]{}]|^!|[!+@](?=\())/g,o=/^\\\\([.?])/,a=/\\(?![!()+@[\]{}])/g;function l(e){return e.replace(s,"\\$2")}function c(e){return e.replace(i,"\\$2")}function u(e){return l(e).replace(o,"//$1").replace(a,"/")}function p(e){return c(e)}e.unixify=function(e){return e.replace(/\\/g,"/")},e.makeAbsolute=function(e,t){return n.resolve(e,t)},e.removeLeadingDotSegment=function(e){if("."===e.charAt(0)){const t=e.charAt(1);if("/"===t||"\\"===t)return e.slice(2)}return e},e.escape=r?l:c,e.escapeWindowsPath=l,e.escapePosixPath=c,e.convertPathToPattern=r?u:p,e.convertWindowsPathToPattern=u,e.convertPosixPathToPattern=p}}),D=L({"../../node_modules/.pnpm/is-extglob@2.1.1/node_modules/is-extglob/index.js"(e,t){t.exports=function(e){if("string"!=typeof e||""===e)return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}}}),B=L({"../../node_modules/.pnpm/is-glob@4.0.3/node_modules/is-glob/index.js"(e,t){var n=D(),r={"{":"}","(":")","[":"]"},i=function(e){if("!"===e[0])return!0;for(var t=0,n=-2,i=-2,s=-2,o=-2,a=-2;t<e.length;){if("*"===e[t])return!0;if("?"===e[t+1]&&/[\].+)]/.test(e[t]))return!0;if(-1!==i&&"["===e[t]&&"]"!==e[t+1]&&(i<t&&(i=e.indexOf("]",t)),i>t)){if(-1===a||a>i)return!0;if(-1===(a=e.indexOf("\\",t))||a>i)return!0}if(-1!==s&&"{"===e[t]&&"}"!==e[t+1]&&(s=e.indexOf("}",t))>t&&(-1===(a=e.indexOf("\\",t))||a>s))return!0;if(-1!==o&&"("===e[t]&&"?"===e[t+1]&&/[:!=]/.test(e[t+2])&&")"!==e[t+3]&&(o=e.indexOf(")",t))>t&&(-1===(a=e.indexOf("\\",t))||a>o))return!0;if(-1!==n&&"("===e[t]&&"|"!==e[t+1]&&(n<t&&(n=e.indexOf("|",t)),-1!==n&&")"!==e[n+1]&&(o=e.indexOf(")",n))>n&&(-1===(a=e.indexOf("\\",n))||a>o)))return!0;if("\\"===e[t]){var l=e[t+1];t+=2;var c=r[l];if(c){var u=e.indexOf(c,t);-1!==u&&(t=u+1)}if("!"===e[t])return!0}else t++}return!1},s=function(e){if("!"===e[0])return!0;for(var t=0;t<e.length;){if(/[*?{}()[\]]/.test(e[t]))return!0;if("\\"===e[t]){var n=e[t+1];t+=2;var i=r[n];if(i){var s=e.indexOf(i,t);-1!==s&&(t=s+1)}if("!"===e[t])return!0}else t++}return!1};t.exports=function(e,t){if("string"!=typeof e||""===e)return!1;if(n(e))return!0;var r=i;return t&&!1===t.strict&&(r=s),r(e)}}}),U=L({"../../node_modules/.pnpm/glob-parent@5.1.2/node_modules/glob-parent/index.js"(e,t){var n=B(),r=T("path").posix.dirname,i="win32"===T("os").platform(),s=/\\/g,o=/[\{\[].*[\}\]]$/,a=/(^|[^\\])([\{\[]|\([^\)]+$)/,l=/\\([\!\*\?\|\[\]\(\)\{\}])/g;t.exports=function(e,t){Object.assign({flipBackslashes:!0},t).flipBackslashes&&i&&e.indexOf("/")<0&&(e=e.replace(s,"/")),o.test(e)&&(e+="/"),e+="a";do{e=r(e)}while(n(e)||a.test(e));return e.replace(l,"$1")}}}),G=L({"../../node_modules/.pnpm/braces@3.0.3/node_modules/braces/lib/utils.js"(e){e.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),e.find=(e,t)=>e.nodes.find((e=>e.type===t)),e.exceedsLimit=(t,n,r=1,i)=>!1!==i&&(!(!e.isInteger(t)||!e.isInteger(n))&&(Number(n)-Number(t))/Number(r)>=i),e.escapeNode=(e,t=0,n)=>{const r=e.nodes[t];r&&(n&&r.type===n||"open"===r.type||"close"===r.type)&&!0!==r.escaped&&(r.value="\\"+r.value,r.escaped=!0)},e.encloseBrace=e=>"brace"===e.type&&(!(e.commas>>0+e.ranges)&&(e.invalid=!0,!0)),e.isInvalidBrace=e=>"brace"===e.type&&(!(!0!==e.invalid&&!e.dollar)||(e.commas>>0+e.ranges?(!0!==e.open||!0!==e.close)&&(e.invalid=!0,!0):(e.invalid=!0,!0))),e.isOpenOrClose=e=>"open"===e.type||"close"===e.type||(!0===e.open||!0===e.close),e.reduce=e=>e.reduce(((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e)),[]),e.flatten=(...e)=>{const t=[],n=e=>{for(let r=0;r<e.length;r++){const i=e[r];Array.isArray(i)?n(i):void 0!==i&&t.push(i)}return t};return n(e),t}}}),W=L({"../../node_modules/.pnpm/braces@3.0.3/node_modules/braces/lib/stringify.js"(e,t){var n=G();t.exports=(e,t={})=>{const r=(e,i={})=>{const s=t.escapeInvalid&&n.isInvalidBrace(i),o=!0===e.invalid&&!0===t.escapeInvalid;let a="";if(e.value)return(s||o)&&n.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(const t of e.nodes)a+=r(t);return a};return r(e)}}}),V=L({"../../node_modules/.pnpm/is-number@7.0.0/node_modules/is-number/index.js"(e,t){t.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}}}),z=L({"../../node_modules/.pnpm/to-regex-range@5.0.1/node_modules/to-regex-range/index.js"(e,t){var n=V(),r=(e,t,i)=>{if(!1===n(e))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===n(t))throw new TypeError("toRegexRange: expected the second argument to be a number.");let a={relaxZeros:!0,...i};"boolean"==typeof a.strictZeros&&(a.relaxZeros=!1===a.strictZeros);let l=e+":"+t+"="+String(a.relaxZeros)+String(a.shorthand)+String(a.capture)+String(a.wrap);if(r.cache.hasOwnProperty(l))return r.cache[l].result;let c=Math.min(e,t),u=Math.max(e,t);if(1===Math.abs(c-u)){let n=e+"|"+t;return a.capture?`(${n})`:!1===a.wrap?n:`(?:${n})`}let p=f(e)||f(t),d={min:e,max:t,a:c,b:u},h=[],g=[];if(p&&(d.isPadded=p,d.maxLen=String(d.max).length),c<0){g=s(u<0?Math.abs(u):1,Math.abs(c),d,a),c=d.a=0}return u>=0&&(h=s(c,u,d,a)),d.negatives=g,d.positives=h,d.result=function(e,t,n){let r=o(e,t,"-",!1)||[],i=o(t,e,"",!1)||[],s=o(e,t,"-?",!0)||[];return r.concat(s).concat(i).join("|")}(g,h),!0===a.capture?d.result=`(${d.result})`:!1!==a.wrap&&h.length+g.length>1&&(d.result=`(?:${d.result})`),r.cache[l]=d,d.result};function i(e,t,n){if(e===t)return{pattern:e,count:[],digits:0};let r=function(e,t){let n=[];for(let r=0;r<e.length;r++)n.push([e[r],t[r]]);return n}(e,t),i=r.length,s="",o=0;for(let e=0;e<i;e++){let[t,n]=r[e];t===n?s+=t:"0"!==t||"9"!==n?s+=d(t,n):o++}return o&&(s+=!0===n.shorthand?"\\d":"[0-9]"),{pattern:s,count:[o],digits:i}}function s(e,t,n,r){let s,o=function(e,t){let n=1,r=1,i=c(e,n),s=new Set([t]);for(;e<=i&&i<=t;)s.add(i),n+=1,i=c(e,n);for(i=u(t+1,r)-1;e<i&&i<=t;)s.add(i),r+=1,i=u(t+1,r)-1;return s=[...s],s.sort(a),s}(e,t),l=[],d=e;for(let e=0;e<o.length;e++){let t=o[e],a=i(String(d),String(t),r),c="";n.isPadded||!s||s.pattern!==a.pattern?(n.isPadded&&(c=h(t,n,r)),a.string=c+a.pattern+p(a.count),l.push(a),d=t+1,s=a):(s.count.length>1&&s.count.pop(),s.count.push(a.count[0]),s.string=s.pattern+p(s.count),d=t+1)}return l}function o(e,t,n,r,i){let s=[];for(let i of e){let{string:e}=i;r||l(t,"string",e)||s.push(n+e),r&&l(t,"string",e)&&s.push(n+e)}return s}function a(e,t){return e>t?1:t>e?-1:0}function l(e,t,n){return e.some((e=>e[t]===n))}function c(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function u(e,t){return e-e%Math.pow(10,t)}function p(e){let[t=0,n=""]=e;return n||t>1?`{${t+(n?","+n:"")}}`:""}function d(e,t,n){return`[${e}${t-e==1?"":"-"}${t}]`}function f(e){return/^-?(0+)\d/.test(e)}function h(e,t,n){if(!t.isPadded)return e;let r=Math.abs(t.maxLen-String(e).length),i=!1!==n.relaxZeros;switch(r){case 0:return"";case 1:return i?"0?":"0";case 2:return i?"0{0,2}":"00";default:return i?`0{0,${r}}`:`0{${r}}`}}r.cache={},r.clearCache=()=>r.cache={},t.exports=r}}),q=L({"../../node_modules/.pnpm/fill-range@7.1.1/node_modules/fill-range/index.js"(e,t){var n=T("util"),r=z(),i=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),s=e=>"number"==typeof e||"string"==typeof e&&""!==e,o=e=>Number.isInteger(+e),a=e=>{let t=`${e}`,n=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++n];);return n>0},l=(e,t,n)=>{if(t>0){let n="-"===e[0]?"-":"";n&&(e=e.slice(1)),e=n+e.padStart(n?t-1:t,"0")}return!1===n?String(e):e},c=(e,t)=>{let n="-"===e[0]?"-":"";for(n&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return n?"-"+e:e},u=(e,t,n,i)=>{if(n)return r(e,t,{wrap:!1,...i});let s=String.fromCharCode(e);return e===t?s:`[${s}-${String.fromCharCode(t)}]`},p=(e,t,n)=>{if(Array.isArray(e)){let t=!0===n.wrap,r=n.capture?"":"?:";return t?`(${r}${e.join("|")})`:e.join("|")}return r(e,t,n)},d=(...e)=>new RangeError("Invalid range arguments: "+n.inspect(...e)),f=(e,t,n)=>{if(!0===n.strictRanges)throw d([e,t]);return[]},h=(e,t,n=1,r={})=>{let i=Number(e),s=Number(t);if(!Number.isInteger(i)||!Number.isInteger(s)){if(!0===r.strictRanges)throw d([e,t]);return[]}0===i&&(i=0),0===s&&(s=0);let o=i>s,f=String(e),h=String(t),g=String(n);n=Math.max(Math.abs(n),1);let m=a(f)||a(h)||a(g),y=m?Math.max(f.length,h.length,g.length):0,_=!1===m&&!1===((e,t,n)=>"string"==typeof e||"string"==typeof t||!0===n.stringify)(e,t,r),b=r.transform||(e=>t=>!0===e?Number(t):String(t))(_);if(r.toRegex&&1===n)return u(c(e,y),c(t,y),!0,r);let v={negatives:[],positives:[]},S=[],E=0;for(;o?i>=s:i<=s;)!0===r.toRegex&&n>1?v[(x=i)<0?"negatives":"positives"].push(Math.abs(x)):S.push(l(b(i,E),y,_)),i=o?i-n:i+n,E++;var x;return!0===r.toRegex?n>1?((e,t,n)=>{e.negatives.sort(((e,t)=>e<t?-1:e>t?1:0)),e.positives.sort(((e,t)=>e<t?-1:e>t?1:0));let r,i=t.capture?"":"?:",s="",o="";return e.positives.length&&(s=e.positives.map((e=>c(String(e),n))).join("|")),e.negatives.length&&(o=`-(${i}${e.negatives.map((e=>c(String(e),n))).join("|")})`),r=s&&o?`${s}|${o}`:s||o,t.wrap?`(${i}${r})`:r})(v,r,y):p(S,null,{wrap:!1,...r}):S},g=(e,t,n,r={})=>{if(null==t&&s(e))return[e];if(!s(e)||!s(t))return f(e,t,r);if("function"==typeof n)return g(e,t,1,{transform:n});if(i(n))return g(e,t,0,n);let a={...r};return!0===a.capture&&(a.wrap=!0),n=n||a.step||1,o(n)?o(e)&&o(t)?h(e,t,n,a):((e,t,n=1,r={})=>{if(!o(e)&&e.length>1||!o(t)&&t.length>1)return f(e,t,r);let i=r.transform||(e=>String.fromCharCode(e)),s=`${e}`.charCodeAt(0),a=`${t}`.charCodeAt(0),l=s>a,c=Math.min(s,a),d=Math.max(s,a);if(r.toRegex&&1===n)return u(c,d,!1,r);let h=[],g=0;for(;l?s>=a:s<=a;)h.push(i(s,g)),s=l?s-n:s+n,g++;return!0===r.toRegex?p(h,null,{wrap:!1,options:r}):h})(e,t,Math.max(Math.abs(n),1),a):null==n||i(n)?g(e,t,1,n):((e,t)=>{if(!0===t.strictRanges)throw new TypeError(`Expected step "${e}" to be a number`);return[]})(n,a)};t.exports=g}}),K=L({"../../node_modules/.pnpm/braces@3.0.3/node_modules/braces/lib/compile.js"(e,t){var n=q(),r=G();t.exports=(e,t={})=>{const i=(e,s={})=>{const o=r.isInvalidBrace(s),a=!0===e.invalid&&!0===t.escapeInvalid,l=!0===o||!0===a,c=!0===t.escapeInvalid?"\\":"";let u="";if(!0===e.isOpen)return c+e.value;if(!0===e.isClose)return console.log("node.isClose",c,e.value),c+e.value;if("open"===e.type)return l?c+e.value:"(";if("close"===e.type)return l?c+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":l?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){const i=r.reduce(e.nodes),s=n(...i,{...t,wrap:!1,toRegex:!0,strictZeros:!0});if(0!==s.length)return i.length>1&&s.length>1?`(${s})`:s}if(e.nodes)for(const t of e.nodes)u+=i(t,e);return u};return i(e)}}}),Q=L({"../../node_modules/.pnpm/braces@3.0.3/node_modules/braces/lib/expand.js"(e,t){var n=q(),r=W(),i=G(),s=(e="",t="",n=!1)=>{const r=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return n?i.flatten(t).map((e=>`{${e}}`)):t;for(const i of e)if(Array.isArray(i))for(const e of i)r.push(s(e,t,n));else for(let e of t)!0===n&&"string"==typeof e&&(e=`{${e}}`),r.push(Array.isArray(e)?s(i,e,n):i+e);return i.flatten(r)};t.exports=(e,t={})=>{const o=void 0===t.rangeLimit?1e3:t.rangeLimit,a=(e,l={})=>{e.queue=[];let c=l,u=l.queue;for(;"brace"!==c.type&&"root"!==c.type&&c.parent;)c=c.parent,u=c.queue;if(e.invalid||e.dollar)return void u.push(s(u.pop(),r(e,t)));if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length)return void u.push(s(u.pop(),["{}"]));if(e.nodes&&e.ranges>0){const a=i.reduce(e.nodes);if(i.exceedsLimit(...a,t.step,o))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let l=n(...a,t);return 0===l.length&&(l=r(e,t)),u.push(s(u.pop(),l)),void(e.nodes=[])}const p=i.encloseBrace(e);let d=e.queue,f=e;for(;"brace"!==f.type&&"root"!==f.type&&f.parent;)f=f.parent,d=f.queue;for(let t=0;t<e.nodes.length;t++){const n=e.nodes[t];"comma"!==n.type||"brace"!==e.type?"close"!==n.type?n.value&&"open"!==n.type?d.push(s(d.pop(),n.value)):n.nodes&&a(n,e):u.push(s(u.pop(),d,p)):(1===t&&d.push(""),d.push(""))}return d};return i.flatten(a(e))}}}),Y=L({"../../node_modules/.pnpm/braces@3.0.3/node_modules/braces/lib/constants.js"(e,t){t.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}}}),X=L({"../../node_modules/.pnpm/braces@3.0.3/node_modules/braces/lib/parse.js"(e,t){var n=W(),{MAX_LENGTH:r,CHAR_BACKSLASH:i,CHAR_BACKTICK:s,CHAR_COMMA:o,CHAR_DOT:a,CHAR_LEFT_PARENTHESES:l,CHAR_RIGHT_PARENTHESES:c,CHAR_LEFT_CURLY_BRACE:u,CHAR_RIGHT_CURLY_BRACE:p,CHAR_LEFT_SQUARE_BRACKET:d,CHAR_RIGHT_SQUARE_BRACKET:f,CHAR_DOUBLE_QUOTE:h,CHAR_SINGLE_QUOTE:g,CHAR_NO_BREAK_SPACE:m,CHAR_ZERO_WIDTH_NOBREAK_SPACE:y}=Y();t.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");const _=t||{},b="number"==typeof _.maxLength?Math.min(r,_.maxLength):r;if(e.length>b)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${b})`);const v={type:"root",input:e,nodes:[]},S=[v];let E=v,x=v,w=0;const A=e.length;let k,R=0,P=0;const C=()=>e[R++],O=e=>{if("text"===e.type&&"dot"===x.type&&(x.type="text"),!x||"text"!==x.type||"text"!==e.type)return E.nodes.push(e),e.parent=E,e.prev=x,x=e,e;x.value+=e.value};for(O({type:"bos"});R<A;)if(E=S[S.length-1],k=C(),k!==y&&k!==m)if(k!==i)if(k!==f)if(k!==d)if(k!==l)if(k!==c)if(k!==h&&k!==g&&k!==s)if(k!==u)if(k!==p)if(k===o&&P>0){if(E.ranges>0){E.ranges=0;const e=E.nodes.shift();E.nodes=[e,{type:"text",value:n(E)}]}O({type:"comma",value:k}),E.commas++}else if(k===a&&P>0&&0===E.commas){const e=E.nodes;if(0===P||0===e.length){O({type:"text",value:k});continue}if("dot"===x.type){if(E.range=[],x.value+=k,x.type="range",3!==E.nodes.length&&5!==E.nodes.length){E.invalid=!0,E.ranges=0,x.type="text";continue}E.ranges++,E.args=[];continue}if("range"===x.type){e.pop();const t=e[e.length-1];t.value+=x.value+k,x=t,E.ranges--;continue}O({type:"dot",value:k})}else O({type:"text",value:k});else{if("brace"!==E.type){O({type:"text",value:k});continue}const e="close";E=S.pop(),E.close=!0,O({type:e,value:k}),P--,E=S[S.length-1]}else{P++;const e=x.value&&"$"===x.value.slice(-1)||!0===E.dollar;E=O({type:"brace",open:!0,close:!1,dollar:e,depth:P,commas:0,ranges:0,nodes:[]}),S.push(E),O({type:"open",value:k})}else{const e=k;let n;for(!0!==t.keepQuotes&&(k="");R<A&&(n=C());)if(n!==i){if(n===e){!0===t.keepQuotes&&(k+=n);break}k+=n}else k+=n+C();O({type:"text",value:k})}else{if("paren"!==E.type){O({type:"text",value:k});continue}E=S.pop(),O({type:"text",value:k}),E=S[S.length-1]}else E=O({type:"paren",nodes:[]}),S.push(E),O({type:"text",value:k});else{let e;for(w++;R<A&&(e=C());)if(k+=e,e!==d)if(e!==i){if(e===f&&(w--,0===w))break}else k+=C();else w++;O({type:"text",value:k})}else O({type:"text",value:"\\"+k});else O({type:"text",value:(t.keepEscaping?k:"")+C()});do{if(E=S.pop(),"root"!==E.type){E.nodes.forEach((e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)}));const e=S[S.length-1],t=e.nodes.indexOf(E);e.nodes.splice(t,1,...E.nodes)}}while(S.length>0);return O({type:"eos"}),v}}}),J=L({"../../node_modules/.pnpm/braces@3.0.3/node_modules/braces/index.js"(e,t){var n=W(),r=K(),i=Q(),s=X(),o=(e,t={})=>{let n=[];if(Array.isArray(e))for(const r of e){const e=o.create(r,t);Array.isArray(e)?n.push(...e):n.push(e)}else n=[].concat(o.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(n=[...new Set(n)]),n};o.parse=(e,t={})=>s(e,t),o.stringify=(e,t={})=>n("string"==typeof e?o.parse(e,t):e,t),o.compile=(e,t={})=>("string"==typeof e&&(e=o.parse(e,t)),r(e,t)),o.expand=(e,t={})=>{"string"==typeof e&&(e=o.parse(e,t));let n=i(e,t);return!0===t.noempty&&(n=n.filter(Boolean)),!0===t.nodupes&&(n=[...new Set(n)]),n},o.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?o.compile(e,t):o.expand(e,t),t.exports=o}}),Z=L({"../../node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/lib/constants.js"(e,t){var n=T("path"),r="\\\\/",i=`[^${r}]`,s="\\.",o="\\/",a="[^/]",l=`(?:${o}|$)`,c=`(?:^|${o})`,u=`${s}{1,2}${l}`,p={DOT_LITERAL:s,PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:o,ONE_CHAR:"(?=.)",QMARK:a,END_ANCHOR:l,DOTS_SLASH:u,NO_DOT:`(?!${s})`,NO_DOTS:`(?!${c}${u})`,NO_DOT_SLASH:`(?!${s}{0,1}${l})`,NO_DOTS_SLASH:`(?!${u})`,QMARK_NO_DOT:`[^.${o}]`,STAR:`${a}*?`,START_ANCHOR:c},d={...p,SLASH_LITERAL:`[${r}]`,QMARK:i,STAR:`${i}*?`,DOTS_SLASH:`${s}{1,2}(?:[${r}]|$)`,NO_DOT:`(?!${s})`,NO_DOTS:`(?!(?:^|[${r}])${s}{1,2}(?:[${r}]|$))`,NO_DOT_SLASH:`(?!${s}{0,1}(?:[${r}]|$))`,NO_DOTS_SLASH:`(?!${s}{1,2}(?:[${r}]|$))`,QMARK_NO_DOT:`[^.${r}]`,START_ANCHOR:`(?:^|[${r}])`,END_ANCHOR:`(?:[${r}]|$)`};t.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:n.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?d:p}}}),ee=L({"../../node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/lib/utils.js"(e){var t=T("path"),n="win32"===process.platform,{REGEX_BACKSLASH:r,REGEX_REMOVE_BACKSLASH:i,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:o}=Z();e.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),e.hasRegexChars=e=>s.test(e),e.isRegexChar=t=>1===t.length&&e.hasRegexChars(t),e.escapeRegex=e=>e.replace(o,"\\$1"),e.toPosixSlashes=e=>e.replace(r,"/"),e.removeBackslashes=e=>e.replace(i,(e=>"\\"===e?"":e)),e.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return 3===e.length&&e[0]>=9||8===e[0]&&e[1]>=10},e.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===n||"\\"===t.sep,e.escapeLast=(t,n,r)=>{const i=t.lastIndexOf(n,r);return-1===i?t:"\\"===t[i-1]?e.escapeLast(t,n,i-1):`${t.slice(0,i)}\\${t.slice(i)}`},e.removePrefix=(e,t={})=>{let n=e;return n.startsWith("./")&&(n=n.slice(2),t.prefix="./"),n},e.wrapOutput=(e,t={},n={})=>{let r=`${n.contains?"":"^"}(?:${e})${n.contains?"":"$"}`;return!0===t.negated&&(r=`(?:^(?!${r}).*$)`),r}}}),te=L({"../../node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/lib/scan.js"(e,t){var n=ee(),{CHAR_ASTERISK:r,CHAR_AT:i,CHAR_BACKWARD_SLASH:s,CHAR_COMMA:o,CHAR_DOT:a,CHAR_EXCLAMATION_MARK:l,CHAR_FORWARD_SLASH:c,CHAR_LEFT_CURLY_BRACE:u,CHAR_LEFT_PARENTHESES:p,CHAR_LEFT_SQUARE_BRACKET:d,CHAR_PLUS:f,CHAR_QUESTION_MARK:h,CHAR_RIGHT_CURLY_BRACE:g,CHAR_RIGHT_PARENTHESES:m,CHAR_RIGHT_SQUARE_BRACKET:y}=Z(),_=e=>e===c||e===s,b=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};t.exports=(e,t)=>{const v=t||{},S=e.length-1,E=!0===v.parts||!0===v.scanToEnd,x=[],w=[],A=[];let k,R,P=e,C=-1,O=0,$=0,T=!1,L=!1,j=!1,M=!1,F=!1,N=!1,I=!1,H=!1,D=!1,B=!1,U=0,G={value:"",depth:0,isGlob:!1};const W=()=>C>=S,V=()=>(k=R,P.charCodeAt(++C));for(;C<S;){let e;if(R=V(),R!==s){if(!0===N||R===u){for(U++;!0!==W()&&(R=V());)if(R!==s)if(R!==u){if(!0!==N&&R===a&&(R=V())===a){if(T=G.isBrace=!0,j=G.isGlob=!0,B=!0,!0===E)continue;break}if(!0!==N&&R===o){if(T=G.isBrace=!0,j=G.isGlob=!0,B=!0,!0===E)continue;break}if(R===g&&(U--,0===U)){N=!1,T=G.isBrace=!0,B=!0;break}}else U++;else I=G.backslashes=!0,V();if(!0===E)continue;break}if(R!==c){if(!0!==v.noext){if(!0===(R===f||R===i||R===r||R===h||R===l)&&P.charCodeAt(C+1)===p){if(j=G.isGlob=!0,M=G.isExtglob=!0,B=!0,R===l&&C===O&&(D=!0),!0===E){for(;!0!==W()&&(R=V());)if(R!==s){if(R===m){j=G.isGlob=!0,B=!0;break}}else I=G.backslashes=!0,R=V();continue}break}}if(R===r){if(k===r&&(F=G.isGlobstar=!0),j=G.isGlob=!0,B=!0,!0===E)continue;break}if(R===h){if(j=G.isGlob=!0,B=!0,!0===E)continue;break}if(R===d){for(;!0!==W()&&(e=V());)if(e!==s){if(e===y){L=G.isBracket=!0,j=G.isGlob=!0,B=!0;break}}else I=G.backslashes=!0,V();if(!0===E)continue;break}if(!0===v.nonegate||R!==l||C!==O){if(!0!==v.noparen&&R===p){if(j=G.isGlob=!0,!0===E){for(;!0!==W()&&(R=V());)if(R!==p){if(R===m){B=!0;break}}else I=G.backslashes=!0,R=V();continue}break}if(!0===j){if(B=!0,!0===E)continue;break}}else H=G.negated=!0,O++}else{if(x.push(C),w.push(G),G={value:"",depth:0,isGlob:!1},!0===B)continue;if(k===a&&C===O+1){O+=2;continue}$=C+1}}else I=G.backslashes=!0,R=V(),R===u&&(N=!0)}!0===v.noext&&(M=!1,j=!1);let z=P,q="",K="";O>0&&(q=P.slice(0,O),P=P.slice(O),$-=O),z&&!0===j&&$>0?(z=P.slice(0,$),K=P.slice($)):!0===j?(z="",K=P):z=P,z&&""!==z&&"/"!==z&&z!==P&&_(z.charCodeAt(z.length-1))&&(z=z.slice(0,-1)),!0===v.unescape&&(K&&(K=n.removeBackslashes(K)),z&&!0===I&&(z=n.removeBackslashes(z)));const Q={prefix:q,input:e,start:O,base:z,glob:K,isBrace:T,isBracket:L,isGlob:j,isExtglob:M,isGlobstar:F,negated:H,negatedExtglob:D};if(!0===v.tokens&&(Q.maxDepth=0,_(R)||w.push(G),Q.tokens=w),!0===v.parts||!0===v.tokens){let t;for(let n=0;n<x.length;n++){const r=t?t+1:O,i=x[n],s=e.slice(r,i);v.tokens&&(0===n&&0!==O?(w[n].isPrefix=!0,w[n].value=q):w[n].value=s,b(w[n]),Q.maxDepth+=w[n].depth),0===n&&""===s||A.push(s),t=i}if(t&&t+1<e.length){const n=e.slice(t+1);A.push(n),v.tokens&&(w[w.length-1].value=n,b(w[w.length-1]),Q.maxDepth+=w[w.length-1].depth)}Q.slashes=x,Q.parts=A}return Q}}}),ne=L({"../../node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/lib/parse.js"(e,t){var n=Z(),r=ee(),{MAX_LENGTH:i,POSIX_REGEX_SOURCE:s,REGEX_NON_SPECIAL_CHARS:o,REGEX_SPECIAL_CHARS_BACKREF:a,REPLACEMENTS:l}=n,c=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const n=`[${e.join("-")}]`;try{new RegExp(n)}catch(t){return e.map((e=>r.escapeRegex(e))).join("..")}return n},u=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,p=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=l[e]||e;const d={...t},f="number"==typeof d.maxLength?Math.min(i,d.maxLength):i;let h=e.length;if(h>f)throw new SyntaxError(`Input length: ${h}, exceeds maximum allowed length: ${f}`);const g={type:"bos",value:"",output:d.prepend||""},m=[g],y=d.capture?"":"?:",_=r.isWindows(t),b=n.globChars(_),v=n.extglobChars(b),{DOT_LITERAL:S,PLUS_LITERAL:E,SLASH_LITERAL:x,ONE_CHAR:w,DOTS_SLASH:A,NO_DOT:k,NO_DOT_SLASH:R,NO_DOTS_SLASH:P,QMARK:C,QMARK_NO_DOT:O,STAR:$,START_ANCHOR:T}=b,L=e=>`(${y}(?:(?!${T}${e.dot?A:S}).)*?)`,j=d.dot?"":k,M=d.dot?C:O;let F=!0===d.bash?L(d):$;d.capture&&(F=`(${F})`),"boolean"==typeof d.noext&&(d.noextglob=d.noext);const N={input:e,index:-1,start:0,dot:!0===d.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:m};e=r.removePrefix(e,N),h=e.length;const I=[],H=[],D=[];let B,U=g;const G=()=>N.index===h-1,W=N.peek=(t=1)=>e[N.index+t],V=N.advance=()=>e[++N.index]||"",z=()=>e.slice(N.index+1),q=(e="",t=0)=>{N.consumed+=e,N.index+=t},K=e=>{N.output+=null!=e.output?e.output:e.value,q(e.value)},Q=()=>{let e=1;for(;"!"===W()&&("("!==W(2)||"?"===W(3));)V(),N.start++,e++;return e%2!=0&&(N.negated=!0,N.start++,!0)},Y=e=>{N[e]++,D.push(e)},X=e=>{N[e]--,D.pop()},J=e=>{if("globstar"===U.type){const t=N.braces>0&&("comma"===e.type||"brace"===e.type),n=!0===e.extglob||I.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||n||(N.output=N.output.slice(0,-U.output.length),U.type="star",U.value="*",U.output=F,N.output+=U.output)}if(I.length&&"paren"!==e.type&&(I[I.length-1].inner+=e.value),(e.value||e.output)&&K(e),U&&"text"===U.type&&"text"===e.type)return U.value+=e.value,void(U.output=(U.output||"")+e.value);e.prev=U,m.push(e),U=e},Z=(e,t)=>{const n={...v[t],conditions:1,inner:""};n.prev=U,n.parens=N.parens,n.output=N.output;const r=(d.capture?"(":"")+n.open;Y("parens"),J({type:e,value:t,output:N.output?"":w}),J({type:"paren",extglob:!0,value:V(),output:r}),I.push(n)},ee=e=>{let n,r=e.close+(d.capture?")":"");if("negate"===e.type){let i=F;if(e.inner&&e.inner.length>1&&e.inner.includes("/")&&(i=L(d)),(i!==F||G()||/^\)+$/.test(z()))&&(r=e.close=`)$))${i}`),e.inner.includes("*")&&(n=z())&&/^\.[^\\/.]+$/.test(n)){const s=p(n,{...t,fastpaths:!1}).output;r=e.close=`)${s})${i})`}"bos"===e.prev.type&&(N.negatedExtglob=!0)}J({type:"paren",extglob:!0,value:B,output:r}),X("parens")};if(!1!==d.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let n=!1,i=e.replace(a,((e,t,r,i,s,o)=>"\\"===i?(n=!0,e):"?"===i?t?t+i+(s?C.repeat(s.length):""):0===o?M+(s?C.repeat(s.length):""):C.repeat(r.length):"."===i?S.repeat(r.length):"*"===i?t?t+i+(s?F:""):F:t?e:`\\${e}`));return!0===n&&(i=!0===d.unescape?i.replace(/\\/g,""):i.replace(/\\+/g,(e=>e.length%2==0?"\\\\":e?"\\":""))),i===e&&!0===d.contains?(N.output=e,N):(N.output=r.wrapOutput(i,N,t),N)}for(;!G();){if(B=V(),"\0"===B)continue;if("\\"===B){const e=W();if("/"===e&&!0!==d.bash)continue;if("."===e||";"===e)continue;if(!e){B+="\\",J({type:"text",value:B});continue}const t=/^\\+/.exec(z());let n=0;if(t&&t[0].length>2&&(n=t[0].length,N.index+=n,n%2!=0&&(B+="\\")),!0===d.unescape?B=V():B+=V(),0===N.brackets){J({type:"text",value:B});continue}}if(N.brackets>0&&("]"!==B||"["===U.value||"[^"===U.value)){if(!1!==d.posix&&":"===B){const e=U.value.slice(1);if(e.includes("[")&&(U.posix=!0,e.includes(":"))){const e=U.value.lastIndexOf("["),t=U.value.slice(0,e),n=U.value.slice(e+2),r=s[n];if(r){U.value=t+r,N.backtrack=!0,V(),g.output||1!==m.indexOf(U)||(g.output=w);continue}}}("["===B&&":"!==W()||"-"===B&&"]"===W())&&(B=`\\${B}`),"]"!==B||"["!==U.value&&"[^"!==U.value||(B=`\\${B}`),!0===d.posix&&"!"===B&&"["===U.value&&(B="^"),U.value+=B,K({value:B});continue}if(1===N.quotes&&'"'!==B){B=r.escapeRegex(B),U.value+=B,K({value:B});continue}if('"'===B){N.quotes=1===N.quotes?0:1,!0===d.keepQuotes&&J({type:"text",value:B});continue}if("("===B){Y("parens"),J({type:"paren",value:B});continue}if(")"===B){if(0===N.parens&&!0===d.strictBrackets)throw new SyntaxError(u("opening","("));const e=I[I.length-1];if(e&&N.parens===e.parens+1){ee(I.pop());continue}J({type:"paren",value:B,output:N.parens?")":"\\)"}),X("parens");continue}if("["===B){if(!0!==d.nobracket&&z().includes("]"))Y("brackets");else{if(!0!==d.nobracket&&!0===d.strictBrackets)throw new SyntaxError(u("closing","]"));B=`\\${B}`}J({type:"bracket",value:B});continue}if("]"===B){if(!0===d.nobracket||U&&"bracket"===U.type&&1===U.value.length){J({type:"text",value:B,output:`\\${B}`});continue}if(0===N.brackets){if(!0===d.strictBrackets)throw new SyntaxError(u("opening","["));J({type:"text",value:B,output:`\\${B}`});continue}X("brackets");const e=U.value.slice(1);if(!0===U.posix||"^"!==e[0]||e.includes("/")||(B=`/${B}`),U.value+=B,K({value:B}),!1===d.literalBrackets||r.hasRegexChars(e))continue;const t=r.escapeRegex(U.value);if(N.output=N.output.slice(0,-U.value.length),!0===d.literalBrackets){N.output+=t,U.value=t;continue}U.value=`(${y}${t}|${U.value})`,N.output+=U.value;continue}if("{"===B&&!0!==d.nobrace){Y("braces");const e={type:"brace",value:B,output:"(",outputIndex:N.output.length,tokensIndex:N.tokens.length};H.push(e),J(e);continue}if("}"===B){const e=H[H.length-1];if(!0===d.nobrace||!e){J({type:"text",value:B,output:B});continue}let t=")";if(!0===e.dots){const e=m.slice(),n=[];for(let t=e.length-1;t>=0&&(m.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&n.unshift(e[t].value);t=c(n,d),N.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const n=N.output.slice(0,e.outputIndex),r=N.tokens.slice(e.tokensIndex);e.value=e.output="\\{",B=t="\\}",N.output=n;for(const e of r)N.output+=e.output||e.value}J({type:"brace",value:B,output:t}),X("braces"),H.pop();continue}if("|"===B){I.length>0&&I[I.length-1].conditions++,J({type:"text",value:B});continue}if(","===B){let e=B;const t=H[H.length-1];t&&"braces"===D[D.length-1]&&(t.comma=!0,e="|"),J({type:"comma",value:B,output:e});continue}if("/"===B){if("dot"===U.type&&N.index===N.start+1){N.start=N.index+1,N.consumed="",N.output="",m.pop(),U=g;continue}J({type:"slash",value:B,output:x});continue}if("."===B){if(N.braces>0&&"dot"===U.type){"."===U.value&&(U.output=S);const e=H[H.length-1];U.type="dots",U.output+=B,U.value+=B,e.dots=!0;continue}if(N.braces+N.parens===0&&"bos"!==U.type&&"slash"!==U.type){J({type:"text",value:B,output:S});continue}J({type:"dot",value:B,output:S});continue}if("?"===B){if(!(U&&"("===U.value)&&!0!==d.noextglob&&"("===W()&&"?"!==W(2)){Z("qmark",B);continue}if(U&&"paren"===U.type){const e=W();let t=B;if("<"===e&&!r.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===U.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(z()))&&(t=`\\${B}`),J({type:"text",value:B,output:t});continue}if(!0!==d.dot&&("slash"===U.type||"bos"===U.type)){J({type:"qmark",value:B,output:O});continue}J({type:"qmark",value:B,output:C});continue}if("!"===B){if(!0!==d.noextglob&&"("===W()&&("?"!==W(2)||!/[!=<:]/.test(W(3)))){Z("negate",B);continue}if(!0!==d.nonegate&&0===N.index){Q();continue}}if("+"===B){if(!0!==d.noextglob&&"("===W()&&"?"!==W(2)){Z("plus",B);continue}if(U&&"("===U.value||!1===d.regex){J({type:"plus",value:B,output:E});continue}if(U&&("bracket"===U.type||"paren"===U.type||"brace"===U.type)||N.parens>0){J({type:"plus",value:B});continue}J({type:"plus",value:E});continue}if("@"===B){if(!0!==d.noextglob&&"("===W()&&"?"!==W(2)){J({type:"at",extglob:!0,value:B,output:""});continue}J({type:"text",value:B});continue}if("*"!==B){"$"!==B&&"^"!==B||(B=`\\${B}`);const e=o.exec(z());e&&(B+=e[0],N.index+=e[0].length),J({type:"text",value:B});continue}if(U&&("globstar"===U.type||!0===U.star)){U.type="star",U.star=!0,U.value+=B,U.output=F,N.backtrack=!0,N.globstar=!0,q(B);continue}let t=z();if(!0!==d.noextglob&&/^\([^?]/.test(t)){Z("star",B);continue}if("star"===U.type){if(!0===d.noglobstar){q(B);continue}const n=U.prev,r=n.prev,i="slash"===n.type||"bos"===n.type,s=r&&("star"===r.type||"globstar"===r.type);if(!0===d.bash&&(!i||t[0]&&"/"!==t[0])){J({type:"star",value:B,output:""});continue}const o=N.braces>0&&("comma"===n.type||"brace"===n.type),a=I.length&&("pipe"===n.type||"paren"===n.type);if(!i&&"paren"!==n.type&&!o&&!a){J({type:"star",value:B,output:""});continue}for(;"/**"===t.slice(0,3);){const n=e[N.index+4];if(n&&"/"!==n)break;t=t.slice(3),q("/**",3)}if("bos"===n.type&&G()){U.type="globstar",U.value+=B,U.output=L(d),N.output=U.output,N.globstar=!0,q(B);continue}if("slash"===n.type&&"bos"!==n.prev.type&&!s&&G()){N.output=N.output.slice(0,-(n.output+U.output).length),n.output=`(?:${n.output}`,U.type="globstar",U.output=L(d)+(d.strictSlashes?")":"|$)"),U.value+=B,N.globstar=!0,N.output+=n.output+U.output,q(B);continue}if("slash"===n.type&&"bos"!==n.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";N.output=N.output.slice(0,-(n.output+U.output).length),n.output=`(?:${n.output}`,U.type="globstar",U.output=`${L(d)}${x}|${x}${e})`,U.value+=B,N.output+=n.output+U.output,N.globstar=!0,q(B+V()),J({type:"slash",value:"/",output:""});continue}if("bos"===n.type&&"/"===t[0]){U.type="globstar",U.value+=B,U.output=`(?:^|${x}|${L(d)}${x})`,N.output=U.output,N.globstar=!0,q(B+V()),J({type:"slash",value:"/",output:""});continue}N.output=N.output.slice(0,-U.output.length),U.type="globstar",U.output=L(d),U.value+=B,N.output+=U.output,N.globstar=!0,q(B);continue}const n={type:"star",value:B,output:F};!0!==d.bash?!U||"bracket"!==U.type&&"paren"!==U.type||!0!==d.regex?(N.index!==N.start&&"slash"!==U.type&&"dot"!==U.type||("dot"===U.type?(N.output+=R,U.output+=R):!0===d.dot?(N.output+=P,U.output+=P):(N.output+=j,U.output+=j),"*"!==W()&&(N.output+=w,U.output+=w)),J(n)):(n.output=B,J(n)):(n.output=".*?","bos"!==U.type&&"slash"!==U.type||(n.output=j+n.output),J(n))}for(;N.brackets>0;){if(!0===d.strictBrackets)throw new SyntaxError(u("closing","]"));N.output=r.escapeLast(N.output,"["),X("brackets")}for(;N.parens>0;){if(!0===d.strictBrackets)throw new SyntaxError(u("closing",")"));N.output=r.escapeLast(N.output,"("),X("parens")}for(;N.braces>0;){if(!0===d.strictBrackets)throw new SyntaxError(u("closing","}"));N.output=r.escapeLast(N.output,"{"),X("braces")}if(!0===d.strictSlashes||"star"!==U.type&&"bracket"!==U.type||J({type:"maybe_slash",value:"",output:`${x}?`}),!0===N.backtrack){N.output="";for(const e of N.tokens)N.output+=null!=e.output?e.output:e.value,e.suffix&&(N.output+=e.suffix)}return N};p.fastpaths=(e,t)=>{const s={...t},o="number"==typeof s.maxLength?Math.min(i,s.maxLength):i,a=e.length;if(a>o)throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${o}`);e=l[e]||e;const c=r.isWindows(t),{DOT_LITERAL:u,SLASH_LITERAL:p,ONE_CHAR:d,DOTS_SLASH:f,NO_DOT:h,NO_DOTS:g,NO_DOTS_SLASH:m,STAR:y,START_ANCHOR:_}=n.globChars(c),b=s.dot?g:h,v=s.dot?m:h,S=s.capture?"":"?:";let E=!0===s.bash?".*?":y;s.capture&&(E=`(${E})`);const x=e=>!0===e.noglobstar?E:`(${S}(?:(?!${_}${e.dot?f:u}).)*?)`,w=e=>{switch(e){case"*":return`${b}${d}${E}`;case".*":return`${u}${d}${E}`;case"*.*":return`${b}${E}${u}${d}${E}`;case"*/*":return`${b}${E}${p}${d}${v}${E}`;case"**":return b+x(s);case"**/*":return`(?:${b}${x(s)}${p})?${v}${d}${E}`;case"**/*.*":return`(?:${b}${x(s)}${p})?${v}${E}${u}${d}${E}`;case"**/.*":return`(?:${b}${x(s)}${p})?${u}${d}${E}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const n=w(t[1]);if(!n)return;return n+u+t[2]}}},A=r.removePrefix(e,{negated:!1,prefix:""});let k=w(A);return k&&!0!==s.strictSlashes&&(k+=`${p}?`),k},t.exports=p}}),re=L({"../../node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/lib/picomatch.js"(e,t){var n=T("path"),r=te(),i=ne(),s=ee(),o=Z(),a=(e,t,n=!1)=>{if(Array.isArray(e)){const r=e.map((e=>a(e,t,n)));return e=>{for(const t of r){const n=t(e);if(n)return n}return!1}}const r=(i=e)&&"object"==typeof i&&!Array.isArray(i)&&e.tokens&&e.input;var i;if(""===e||"string"!=typeof e&&!r)throw new TypeError("Expected pattern to be a non-empty string");const o=t||{},l=s.isWindows(t),c=r?a.compileRe(e,t):a.makeRe(e,t,!1,!0),u=c.state;delete c.state;let p=()=>!1;if(o.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};p=a(o.ignore,e,n)}const d=(n,r=!1)=>{const{isMatch:i,match:s,output:d}=a.test(n,c,t,{glob:e,posix:l}),f={glob:e,state:u,regex:c,posix:l,input:n,output:d,match:s,isMatch:i};return"function"==typeof o.onResult&&o.onResult(f),!1===i?(f.isMatch=!1,!!r&&f):p(n)?("function"==typeof o.onIgnore&&o.onIgnore(f),f.isMatch=!1,!!r&&f):("function"==typeof o.onMatch&&o.onMatch(f),!r||f)};return n&&(d.state=u),d};a.test=(e,t,n,{glob:r,posix:i}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const o=n||{},l=o.format||(i?s.toPosixSlashes:null);let c=e===r,u=c&&l?l(e):e;return!1===c&&(u=l?l(e):e,c=u===r),!1!==c&&!0!==o.capture||(c=!0===o.matchBase||!0===o.basename?a.matchBase(e,t,n,i):t.exec(u)),{isMatch:Boolean(c),match:c,output:u}},a.matchBase=(e,t,r,i=s.isWindows(r))=>(t instanceof RegExp?t:a.makeRe(t,r)).test(n.basename(e)),a.isMatch=(e,t,n)=>a(t,n)(e),a.parse=(e,t)=>Array.isArray(e)?e.map((e=>a.parse(e,t))):i(e,{...t,fastpaths:!1}),a.scan=(e,t)=>r(e,t),a.compileRe=(e,t,n=!1,r=!1)=>{if(!0===n)return e.output;const i=t||{},s=i.contains?"":"^",o=i.contains?"":"$";let l=`${s}(?:${e.output})${o}`;e&&!0===e.negated&&(l=`^(?!${l}).*$`);const c=a.toRegex(l,t);return!0===r&&(c.state=e),c},a.makeRe=(e,t={},n=!1,r=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");let s={negated:!1,fastpaths:!0};return!1===t.fastpaths||"."!==e[0]&&"*"!==e[0]||(s.output=i.fastpaths(e,t)),s.output||(s=i(e,t)),a.compileRe(s,t,n,r)},a.toRegex=(e,t)=>{try{const n=t||{};return new RegExp(e,n.flags||(n.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},a.constants=o,t.exports=a}}),ie=L({"../../node_modules/.pnpm/picomatch@2.3.1/node_modules/picomatch/index.js"(e,t){t.exports=re()}}),se=L({"../../node_modules/.pnpm/micromatch@4.0.7/node_modules/micromatch/index.js"(e,t){var n=T("util"),r=J(),i=ie(),s=ee(),o=e=>""===e||"./"===e,a=(e,t,n)=>{t=[].concat(t),e=[].concat(e);let r=new Set,s=new Set,o=new Set,a=0,l=e=>{o.add(e.output),n&&n.onResult&&n.onResult(e)};for(let o=0;o<t.length;o++){let c=i(String(t[o]),{...n,onResult:l},!0),u=c.state.negated||c.state.negatedExtglob;u&&a++;for(let t of e){let e=c(t,!0);(u?!e.isMatch:e.isMatch)&&(u?r.add(e.output):(r.delete(e.output),s.add(e.output)))}}let c=(a===t.length?[...o]:[...s]).filter((e=>!r.has(e)));if(n&&0===c.length){if(!0===n.failglob)throw new Error(`No matches found for "${t.join(", ")}"`);if(!0===n.nonull||!0===n.nullglob)return n.unescape?t.map((e=>e.replace(/\\/g,""))):t}return c};a.match=a,a.matcher=(e,t)=>i(e,t),a.any=a.isMatch=(e,t,n)=>i(t,n)(e),a.not=(e,t,n={})=>{t=[].concat(t).map(String);let r=new Set,i=[],s=new Set(a(e,t,{...n,onResult:e=>{n.onResult&&n.onResult(e),i.push(e.output)}}));for(let e of i)s.has(e)||r.add(e);return[...r]},a.contains=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);if(Array.isArray(t))return t.some((t=>a.contains(e,t,r)));if("string"==typeof t){if(o(e)||o(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return a.isMatch(e,t,{...r,contains:!0})},a.matchKeys=(e,t,n)=>{if(!s.isObject(e))throw new TypeError("Expected the first argument to be an object");let r=a(Object.keys(e),t,n),i={};for(let t of r)i[t]=e[t];return i},a.some=(e,t,n)=>{let r=[].concat(e);for(let e of[].concat(t)){let t=i(String(e),n);if(r.some((e=>t(e))))return!0}return!1},a.every=(e,t,n)=>{let r=[].concat(e);for(let e of[].concat(t)){let t=i(String(e),n);if(!r.every((e=>t(e))))return!1}return!0},a.all=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);return[].concat(t).every((t=>i(t,r)(e)))},a.capture=(e,t,n)=>{let r=s.isWindows(n),o=i.makeRe(String(e),{...n,capture:!0}).exec(r?s.toPosixSlashes(t):t);if(o)return o.slice(1).map((e=>void 0===e?"":e))},a.makeRe=(...e)=>i.makeRe(...e),a.scan=(...e)=>i.scan(...e),a.parse=(e,t)=>{let n=[];for(let s of[].concat(e||[]))for(let e of r(String(s),t))n.push(i.parse(e,t));return n},a.braces=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return t&&!0===t.nobrace||!/\{.*\}/.test(e)?[e]:r(e,t)},a.braceExpand=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return a.braces(e,{...t,expand:!0})},t.exports=a}}),oe=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/utils/pattern.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.removeDuplicateSlashes=e.matchAny=e.convertPatternsToRe=e.makeRe=e.getPatternParts=e.expandBraceExpansion=e.expandPatternsWithBraceExpansion=e.isAffectDepthOfReadingPattern=e.endsWithSlashGlobStar=e.hasGlobStar=e.getBaseDirectory=e.isPatternRelatedToParentDirectory=e.getPatternsOutsideCurrentDirectory=e.getPatternsInsideCurrentDirectory=e.getPositivePatterns=e.getNegativePatterns=e.isPositivePattern=e.isNegativePattern=e.convertToNegativePattern=e.convertToPositivePattern=e.isDynamicPattern=e.isStaticPattern=void 0;var t=T("path"),n=U(),r=se(),i=/[*?]|^!/,s=/\[[^[]*]/,o=/(?:^|[^!*+?@])\([^(]*\|[^|]*\)/,a=/[!*+?@]\([^(]*\)/,l=/,|\.\./,c=/(?!^)\/{2,}/g;function u(e,t={}){return!p(e,t)}function p(e,t={}){return""!==e&&(!(!1!==t.caseSensitiveMatch&&!e.includes("\\"))||(!!(i.test(e)||s.test(e)||o.test(e))||(!(!1===t.extglob||!a.test(e))||!(!1===t.braceExpansion||!function(e){const t=e.indexOf("{");if(-1===t)return!1;const n=e.indexOf("}",t+1);if(-1===n)return!1;const r=e.slice(t,n);return l.test(r)}(e)))))}function d(e){return e.startsWith("!")&&"("!==e[1]}function f(e){return!d(e)}function h(e){return e.startsWith("..")||e.startsWith("./..")}function g(e){return e.endsWith("/**")}function m(e){const t=r.braces(e,{expand:!0,nodupes:!0,keepEscaping:!0});return t.sort(((e,t)=>e.length-t.length)),t.filter((e=>""!==e))}function y(e,t){return r.makeRe(e,t)}e.isStaticPattern=u,e.isDynamicPattern=p,e.convertToPositivePattern=function(e){return d(e)?e.slice(1):e},e.convertToNegativePattern=function(e){return"!"+e},e.isNegativePattern=d,e.isPositivePattern=f,e.getNegativePatterns=function(e){return e.filter(d)},e.getPositivePatterns=function(e){return e.filter(f)},e.getPatternsInsideCurrentDirectory=function(e){return e.filter((e=>!h(e)))},e.getPatternsOutsideCurrentDirectory=function(e){return e.filter(h)},e.isPatternRelatedToParentDirectory=h,e.getBaseDirectory=function(e){return n(e,{flipBackslashes:!1})},e.hasGlobStar=function(e){return e.includes("**")},e.endsWithSlashGlobStar=g,e.isAffectDepthOfReadingPattern=function(e){const n=t.basename(e);return g(e)||u(n)},e.expandPatternsWithBraceExpansion=function(e){return e.reduce(((e,t)=>e.concat(m(t))),[])},e.expandBraceExpansion=m,e.getPatternParts=function(e,t){let{parts:n}=r.scan(e,Object.assign(Object.assign({},t),{parts:!0}));return 0===n.length&&(n=[e]),n[0].startsWith("/")&&(n[0]=n[0].slice(1),n.unshift("")),n},e.makeRe=y,e.convertPatternsToRe=function(e,t){return e.map((e=>y(e,t)))},e.matchAny=function(e,t){return t.some((t=>t.test(e)))},e.removeDuplicateSlashes=function(e){return e.replace(c,"/")}}}),ae=L({"../../node_modules/.pnpm/merge2@1.4.1/node_modules/merge2/index.js"(e,t){var n=T("stream").PassThrough,r=Array.prototype.slice;function i(e,t){if(Array.isArray(e))for(let n=0,r=e.length;n<r;n++)e[n]=i(e[n],t);else{if(!e._readableState&&e.pipe&&(e=e.pipe(n(t))),!e._readableState||!e.pause||!e.pipe)throw new Error("Only readable stream can be merged.");e.pause()}return e}t.exports=function(){const e=[],t=r.call(arguments);let s=!1,o=t[t.length-1];o&&!Array.isArray(o)&&null==o.pipe?t.pop():o={};const a=!1!==o.end,l=!0===o.pipeError;null==o.objectMode&&(o.objectMode=!0);null==o.highWaterMark&&(o.highWaterMark=65536);const c=n(o);function u(){for(let t=0,n=arguments.length;t<n;t++)e.push(i(arguments[t],o));return p(),this}function p(){if(s)return;s=!0;let t=e.shift();if(!t)return void process.nextTick(d);Array.isArray(t)||(t=[t]);let n=t.length+1;function r(){--n>0||(s=!1,p())}function i(e){function t(){e.removeListener("merge2UnpipeEnd",t),e.removeListener("end",t),l&&e.removeListener("error",n),r()}function n(e){c.emit("error",e)}if(e._readableState.endEmitted)return r();e.on("merge2UnpipeEnd",t),e.on("end",t),l&&e.on("error",n),e.pipe(c,{end:!1}),e.resume()}for(let e=0;e<t.length;e++)i(t[e]);r()}function d(){s=!1,c.emit("queueDrain"),a&&c.end()}c.setMaxListeners(0),c.add=u,c.on("unpipe",(function(e){e.emit("merge2UnpipeEnd")})),t.length&&u.apply(null,t);return c}}}),le=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/utils/stream.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var t=ae();function n(e){e.forEach((e=>e.emit("close")))}e.merge=function(e){const r=t(e);return e.forEach((e=>{e.once("error",(e=>r.emit("error",e)))})),r.once("close",(()=>n(e))),r.once("end",(()=>n(e))),r}}}),ce=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/utils/string.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=e.isString=void 0,e.isString=function(e){return"string"==typeof e},e.isEmpty=function(e){return""===e}}}),ue=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/utils/index.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.string=e.stream=e.pattern=e.path=e.fs=e.errno=e.array=void 0;var t=F();e.array=t;var n=N();e.errno=n;var r=I();e.fs=r;var i=H();e.path=i;var s=oe();e.pattern=s;var o=le();e.stream=o;var a=ce();e.string=a}}),pe=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/managers/tasks.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.convertPatternGroupToTask=e.convertPatternGroupsToTasks=e.groupPatternsByBaseDirectory=e.getNegativePatternsAsPositive=e.getPositivePatterns=e.convertPatternsToTasks=e.generate=void 0;var t=ue();function n(e,n){let r=e;return n.braceExpansion&&(r=t.pattern.expandPatternsWithBraceExpansion(r)),n.baseNameMatch&&(r=r.map((e=>e.includes("/")?e:`**/${e}`))),r.map((e=>t.pattern.removeDuplicateSlashes(e)))}function r(e,n,r){const i=[],s=t.pattern.getPatternsOutsideCurrentDirectory(e),c=t.pattern.getPatternsInsideCurrentDirectory(e),u=o(s),p=o(c);return i.push(...a(u,n,r)),"."in p?i.push(l(".",c,n,r)):i.push(...a(p,n,r)),i}function i(e){return t.pattern.getPositivePatterns(e)}function s(e,n){return t.pattern.getNegativePatterns(e).concat(n).map(t.pattern.convertToPositivePattern)}function o(e){return e.reduce(((e,n)=>{const r=t.pattern.getBaseDirectory(n);return r in e?e[r].push(n):e[r]=[n],e}),{})}function a(e,t,n){return Object.keys(e).map((r=>l(r,e[r],t,n)))}function l(e,n,r,i){return{dynamic:i,positive:n,negative:r,base:e,patterns:[].concat(n,r.map(t.pattern.convertToNegativePattern))}}e.generate=function(e,o){const a=n(e,o),l=n(o.ignore,o),c=i(a),u=s(a,l),p=c.filter((e=>t.pattern.isStaticPattern(e,o))),d=c.filter((e=>t.pattern.isDynamicPattern(e,o))),f=r(p,u,!1),h=r(d,u,!0);return f.concat(h)},e.convertPatternsToTasks=r,e.getPositivePatterns=i,e.getNegativePatternsAsPositive=s,e.groupPatternsByBaseDirectory=o,e.convertPatternGroupsToTasks=a,e.convertPatternGroupToTask=l}}),de=L({"../../node_modules/.pnpm/@nodelib+fs.stat@2.0.5/node_modules/@nodelib/fs.stat/out/providers/async.js"(e){function t(e,t){e(t)}function n(e,t){e(null,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.read=void 0,e.read=function(e,r,i){r.fs.lstat(e,((s,o)=>{null===s?o.isSymbolicLink()&&r.followSymbolicLink?r.fs.stat(e,((e,s)=>{if(null!==e)return r.throwErrorOnBrokenSymbolicLink?void t(i,e):void n(i,o);r.markSymbolicLink&&(s.isSymbolicLink=()=>!0),n(i,s)})):n(i,o):t(i,s)}))}}}),fe=L({"../../node_modules/.pnpm/@nodelib+fs.stat@2.0.5/node_modules/@nodelib/fs.stat/out/providers/sync.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.read=void 0,e.read=function(e,t){const n=t.fs.lstatSync(e);if(!n.isSymbolicLink()||!t.followSymbolicLink)return n;try{const n=t.fs.statSync(e);return t.markSymbolicLink&&(n.isSymbolicLink=()=>!0),n}catch(e){if(!t.throwErrorOnBrokenSymbolicLink)return n;throw e}}}}),he=L({"../../node_modules/.pnpm/@nodelib+fs.stat@2.0.5/node_modules/@nodelib/fs.stat/out/adapters/fs.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createFileSystemAdapter=e.FILE_SYSTEM_ADAPTER=void 0;var t=T("fs");e.FILE_SYSTEM_ADAPTER={lstat:t.lstat,stat:t.stat,lstatSync:t.lstatSync,statSync:t.statSync},e.createFileSystemAdapter=function(t){return void 0===t?e.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},e.FILE_SYSTEM_ADAPTER),t)}}}),ge=L({"../../node_modules/.pnpm/@nodelib+fs.stat@2.0.5/node_modules/@nodelib/fs.stat/out/settings.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=he();e.default=class{constructor(e={}){this._options=e,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=t.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(e,t){return null!=e?e:t}}}}),me=L({"../../node_modules/.pnpm/@nodelib+fs.stat@2.0.5/node_modules/@nodelib/fs.stat/out/index.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.statSync=e.stat=e.Settings=void 0;var t=de(),n=fe(),r=ge();function i(e={}){return e instanceof r.default?e:new r.default(e)}e.Settings=r.default,e.stat=function(e,n,r){"function"!=typeof n?t.read(e,i(n),r):t.read(e,i(),n)},e.statSync=function(e,t){const r=i(t);return n.read(e,r)}}}),ye=L({"../../node_modules/.pnpm/queue-microtask@1.2.3/node_modules/queue-microtask/index.js"(e,t){var n;t.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:global):e=>(n||(n=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))}}),_e=L({"../../node_modules/.pnpm/run-parallel@1.2.0/node_modules/run-parallel/index.js"(e,t){t.exports=function(e,t){let r,i,s,o=!0;Array.isArray(e)?(r=[],i=e.length):(s=Object.keys(e),r={},i=s.length);function a(e){function i(){t&&t(e,r),t=null}o?n(i):i()}function l(e,t,n){r[e]=n,(0==--i||t)&&a(t)}i?s?s.forEach((function(t){e[t]((function(e,n){l(t,e,n)}))})):e.forEach((function(e,t){e((function(e,n){l(t,e,n)}))})):a(null);o=!1};var n=ye()}}),be=L({"../../node_modules/.pnpm/@nodelib+fs.scandir@2.1.5/node_modules/@nodelib/fs.scandir/out/constants.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.IS_SUPPORT_READDIR_WITH_FILE_TYPES=void 0;var t=process.versions.node.split(".");if(void 0===t[0]||void 0===t[1])throw new Error(`Unexpected behavior. The 'process.versions.node' variable has invalid value: ${process.versions.node}`);var n=Number.parseInt(t[0],10),r=Number.parseInt(t[1],10),i=n>10,s=10===n&&r>=10;e.IS_SUPPORT_READDIR_WITH_FILE_TYPES=i||s}}),ve=L({"../../node_modules/.pnpm/@nodelib+fs.scandir@2.1.5/node_modules/@nodelib/fs.scandir/out/utils/fs.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createDirentFromStats=void 0;var t=class{constructor(e,t){this.name=e,this.isBlockDevice=t.isBlockDevice.bind(t),this.isCharacterDevice=t.isCharacterDevice.bind(t),this.isDirectory=t.isDirectory.bind(t),this.isFIFO=t.isFIFO.bind(t),this.isFile=t.isFile.bind(t),this.isSocket=t.isSocket.bind(t),this.isSymbolicLink=t.isSymbolicLink.bind(t)}};e.createDirentFromStats=function(e,n){return new t(e,n)}}}),Se=L({"../../node_modules/.pnpm/@nodelib+fs.scandir@2.1.5/node_modules/@nodelib/fs.scandir/out/utils/index.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fs=void 0;var t=ve();e.fs=t}}),Ee=L({"../../node_modules/.pnpm/@nodelib+fs.scandir@2.1.5/node_modules/@nodelib/fs.scandir/out/providers/common.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.joinPathSegments=void 0,e.joinPathSegments=function(e,t,n){return e.endsWith(n)?e+t:e+n+t}}}),xe=L({"../../node_modules/.pnpm/@nodelib+fs.scandir@2.1.5/node_modules/@nodelib/fs.scandir/out/providers/async.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.readdir=e.readdirWithFileTypes=e.read=void 0;var t=me(),n=_e(),r=be(),i=Se(),s=Ee();function o(e,t,r){t.fs.readdir(e,{withFileTypes:!0},((o,a)=>{if(null!==o)return void l(r,o);const u=a.map((n=>({dirent:n,name:n.name,path:s.joinPathSegments(e,n.name,t.pathSegmentSeparator)})));if(!t.followSymbolicLinks)return void c(r,u);const p=u.map((e=>function(e,t){return n=>{e.dirent.isSymbolicLink()?t.fs.stat(e.path,((r,s)=>{if(null!==r)return t.throwErrorOnBrokenSymbolicLink?void n(r):void n(null,e);e.dirent=i.fs.createDirentFromStats(e.name,s),n(null,e)})):n(null,e)}}(e,t)));n(p,((e,t)=>{null===e?c(r,t):l(r,e)}))}))}function a(e,r,o){r.fs.readdir(e,((a,u)=>{if(null!==a)return void l(o,a);const p=u.map((n=>{const o=s.joinPathSegments(e,n,r.pathSegmentSeparator);return e=>{t.stat(o,r.fsStatSettings,((t,s)=>{if(null!==t)return void e(t);const a={name:n,path:o,dirent:i.fs.createDirentFromStats(n,s)};r.stats&&(a.stats=s),e(null,a)}))}}));n(p,((e,t)=>{null===e?c(o,t):l(o,e)}))}))}function l(e,t){e(t)}function c(e,t){e(null,t)}e.read=function(e,t,n){t.stats||!r.IS_SUPPORT_READDIR_WITH_FILE_TYPES?a(e,t,n):o(e,t,n)},e.readdirWithFileTypes=o,e.readdir=a}}),we=L({"../../node_modules/.pnpm/@nodelib+fs.scandir@2.1.5/node_modules/@nodelib/fs.scandir/out/providers/sync.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.readdir=e.readdirWithFileTypes=e.read=void 0;var t=me(),n=be(),r=Se(),i=Ee();function s(e,t){return t.fs.readdirSync(e,{withFileTypes:!0}).map((n=>{const s={dirent:n,name:n.name,path:i.joinPathSegments(e,n.name,t.pathSegmentSeparator)};if(s.dirent.isSymbolicLink()&&t.followSymbolicLinks)try{const e=t.fs.statSync(s.path);s.dirent=r.fs.createDirentFromStats(s.name,e)}catch(e){if(t.throwErrorOnBrokenSymbolicLink)throw e}return s}))}function o(e,n){return n.fs.readdirSync(e).map((s=>{const o=i.joinPathSegments(e,s,n.pathSegmentSeparator),a=t.statSync(o,n.fsStatSettings),l={name:s,path:o,dirent:r.fs.createDirentFromStats(s,a)};return n.stats&&(l.stats=a),l}))}e.read=function(e,t){return!t.stats&&n.IS_SUPPORT_READDIR_WITH_FILE_TYPES?s(e,t):o(e,t)},e.readdirWithFileTypes=s,e.readdir=o}}),Ae=L({"../../node_modules/.pnpm/@nodelib+fs.scandir@2.1.5/node_modules/@nodelib/fs.scandir/out/adapters/fs.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createFileSystemAdapter=e.FILE_SYSTEM_ADAPTER=void 0;var t=T("fs");e.FILE_SYSTEM_ADAPTER={lstat:t.lstat,stat:t.stat,lstatSync:t.lstatSync,statSync:t.statSync,readdir:t.readdir,readdirSync:t.readdirSync},e.createFileSystemAdapter=function(t){return void 0===t?e.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},e.FILE_SYSTEM_ADAPTER),t)}}}),ke=L({"../../node_modules/.pnpm/@nodelib+fs.scandir@2.1.5/node_modules/@nodelib/fs.scandir/out/settings.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=T("path"),n=me(),r=Ae();e.default=class{constructor(e={}){this._options=e,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=r.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,t.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new n.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(e,t){return null!=e?e:t}}}}),Re=L({"../../node_modules/.pnpm/@nodelib+fs.scandir@2.1.5/node_modules/@nodelib/fs.scandir/out/index.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Settings=e.scandirSync=e.scandir=void 0;var t=xe(),n=we(),r=ke();function i(e={}){return e instanceof r.default?e:new r.default(e)}e.Settings=r.default,e.scandir=function(e,n,r){"function"!=typeof n?t.read(e,i(n),r):t.read(e,i(),n)},e.scandirSync=function(e,t){const r=i(t);return n.read(e,r)}}}),Pe=L({"../../node_modules/.pnpm/reusify@1.0.4/node_modules/reusify/reusify.js"(e,t){t.exports=function(e){var t=new e,n=t;return{get:function(){var r=t;return r.next?t=r.next:(t=new e,n=t),r.next=null,r},release:function(e){n.next=e,n=e}}}}}),Ce=L({"../../node_modules/.pnpm/fastq@1.17.1/node_modules/fastq/queue.js"(e,t){var n=Pe();function r(e,t,r){if("function"==typeof e&&(r=t,t=e,e=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var o=n(s),a=null,l=null,c=0,u=null,p={push:function(n,s){var f=o.get();f.context=e,f.release=d,f.value=n,f.callback=s||i,f.errorHandler=u,c>=r||p.paused?l?(l.next=f,l=f):(a=f,l=f,p.saturated()):(c++,t.call(e,f.value,f.worked))},drain:i,saturated:i,pause:function(){p.paused=!0},paused:!1,get concurrency(){return r},set concurrency(e){if(!(e>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=e,!p.paused)for(;a&&c<r;)c++,d()},running:function(){return c},resume:function(){if(!p.paused)return;if(p.paused=!1,null===a)return c++,void d();for(;a&&c<r;)c++,d()},idle:function(){return 0===c&&0===p.length()},length:function(){var e=a,t=0;for(;e;)e=e.next,t++;return t},getQueue:function(){var e=a,t=[];for(;e;)t.push(e.value),e=e.next;return t},unshift:function(n,s){var f=o.get();f.context=e,f.release=d,f.value=n,f.callback=s||i,f.errorHandler=u,c>=r||p.paused?a?(f.next=a,a=f):(a=f,l=f,p.saturated()):(c++,t.call(e,f.value,f.worked))},empty:i,kill:function(){a=null,l=null,p.drain=i},killAndDrain:function(){a=null,l=null,p.drain(),p.drain=i},error:function(e){u=e}};return p;function d(n){n&&o.release(n);var i=a;i&&c<=r?p.paused?c--:(l===a&&(l=null),a=i.next,i.next=null,t.call(e,i.value,i.worked),null===l&&p.empty()):0==--c&&p.drain()}}function i(){}function s(){this.value=null,this.callback=i,this.next=null,this.release=i,this.context=null,this.errorHandler=null;var e=this;this.worked=function(t,n){var r=e.callback,s=e.errorHandler,o=e.value;e.value=null,e.callback=i,e.errorHandler&&s(t,o),r.call(e.context,t,n),e.release(e)}}t.exports=r,t.exports.promise=function(e,t,n){"function"==typeof e&&(n=t,t=e,e=null);var s=r(e,(function(e,n){t.call(this,e).then((function(e){n(null,e)}),n)}),n),o=s.push,a=s.unshift;return s.push=function(e){var t=new Promise((function(t,n){o(e,(function(e,r){e?n(e):t(r)}))}));return t.catch(i),t},s.unshift=function(e){var t=new Promise((function(t,n){a(e,(function(e,r){e?n(e):t(r)}))}));return t.catch(i),t},s.drained=function(){if(s.idle())return new Promise((function(e){e()}));var e=s.drain;return new Promise((function(t){s.drain=function(){e(),t()}}))},s}}}),Oe=L({"../../node_modules/.pnpm/@nodelib+fs.walk@1.2.8/node_modules/@nodelib/fs.walk/out/readers/common.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.joinPathSegments=e.replacePathSegmentSeparator=e.isAppliedFilter=e.isFatalError=void 0,e.isFatalError=function(e,t){return null===e.errorFilter||!e.errorFilter(t)},e.isAppliedFilter=function(e,t){return null===e||e(t)},e.replacePathSegmentSeparator=function(e,t){return e.split(/[/\\]/).join(t)},e.joinPathSegments=function(e,t,n){return""===e?t:e.endsWith(n)?e+t:e+n+t}}}),$e=L({"../../node_modules/.pnpm/@nodelib+fs.walk@1.2.8/node_modules/@nodelib/fs.walk/out/readers/reader.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Oe();e.default=class{constructor(e,n){this._root=e,this._settings=n,this._root=t.replacePathSegmentSeparator(e,n.pathSegmentSeparator)}}}}),Te=L({"../../node_modules/.pnpm/@nodelib+fs.walk@1.2.8/node_modules/@nodelib/fs.walk/out/readers/async.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=T("events"),n=Re(),r=Ce(),i=Oe(),s=$e(),o=class extends s.default{constructor(e,i){super(e,i),this._settings=i,this._scandir=n.scandir,this._emitter=new t.EventEmitter,this._queue=r(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate((()=>{this._pushToQueue(this._root,this._settings.basePath)})),this._emitter}get isDestroyed(){return this._isDestroyed}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(e){this._emitter.on("entry",e)}onError(e){this._emitter.once("error",e)}onEnd(e){this._emitter.once("end",e)}_pushToQueue(e,t){const n={directory:e,base:t};this._queue.push(n,(e=>{null!==e&&this._handleError(e)}))}_worker(e,t){this._scandir(e.directory,this._settings.fsScandirSettings,((n,r)=>{if(null===n){for(const t of r)this._handleEntry(t,e.base);t(null,void 0)}else t(n,void 0)}))}_handleError(e){!this._isDestroyed&&i.isFatalError(this._settings,e)&&(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",e))}_handleEntry(e,t){if(this._isDestroyed||this._isFatalError)return;const n=e.path;void 0!==t&&(e.path=i.joinPathSegments(t,e.name,this._settings.pathSegmentSeparator)),i.isAppliedFilter(this._settings.entryFilter,e)&&this._emitEntry(e),e.dirent.isDirectory()&&i.isAppliedFilter(this._settings.deepFilter,e)&&this._pushToQueue(n,void 0===t?void 0:e.path)}_emitEntry(e){this._emitter.emit("entry",e)}};e.default=o}}),Le=L({"../../node_modules/.pnpm/@nodelib+fs.walk@1.2.8/node_modules/@nodelib/fs.walk/out/providers/async.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Te();e.default=class{constructor(e,n){this._root=e,this._settings=n,this._reader=new t.default(this._root,this._settings),this._storage=[]}read(e){this._reader.onError((t=>{!function(e,t){e(t)}(e,t)})),this._reader.onEntry((e=>{this._storage.push(e)})),this._reader.onEnd((()=>{!function(e,t){e(null,t)}(e,this._storage)})),this._reader.read()}}}}),je=L({"../../node_modules/.pnpm/@nodelib+fs.walk@1.2.8/node_modules/@nodelib/fs.walk/out/providers/stream.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=T("stream"),n=Te();e.default=class{constructor(e,r){this._root=e,this._settings=r,this._reader=new n.default(this._root,this._settings),this._stream=new t.Readable({objectMode:!0,read:()=>{},destroy:()=>{this._reader.isDestroyed||this._reader.destroy()}})}read(){return this._reader.onError((e=>{this._stream.emit("error",e)})),this._reader.onEntry((e=>{this._stream.push(e)})),this._reader.onEnd((()=>{this._stream.push(null)})),this._reader.read(),this._stream}}}}),Me=L({"../../node_modules/.pnpm/@nodelib+fs.walk@1.2.8/node_modules/@nodelib/fs.walk/out/readers/sync.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Re(),n=Oe(),r=$e(),i=class extends r.default{constructor(){super(...arguments),this._scandir=t.scandirSync,this._storage=[],this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),this._storage}_pushToQueue(e,t){this._queue.add({directory:e,base:t})}_handleQueue(){for(const e of this._queue.values())this._handleDirectory(e.directory,e.base)}_handleDirectory(e,t){try{const n=this._scandir(e,this._settings.fsScandirSettings);for(const e of n)this._handleEntry(e,t)}catch(e){this._handleError(e)}}_handleError(e){if(n.isFatalError(this._settings,e))throw e}_handleEntry(e,t){const r=e.path;void 0!==t&&(e.path=n.joinPathSegments(t,e.name,this._settings.pathSegmentSeparator)),n.isAppliedFilter(this._settings.entryFilter,e)&&this._pushToStorage(e),e.dirent.isDirectory()&&n.isAppliedFilter(this._settings.deepFilter,e)&&this._pushToQueue(r,void 0===t?void 0:e.path)}_pushToStorage(e){this._storage.push(e)}};e.default=i}}),Fe=L({"../../node_modules/.pnpm/@nodelib+fs.walk@1.2.8/node_modules/@nodelib/fs.walk/out/providers/sync.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Me();e.default=class{constructor(e,n){this._root=e,this._settings=n,this._reader=new t.default(this._root,this._settings)}read(){return this._reader.read()}}}}),Ne=L({"../../node_modules/.pnpm/@nodelib+fs.walk@1.2.8/node_modules/@nodelib/fs.walk/out/settings.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=T("path"),n=Re();e.default=class{constructor(e={}){this._options=e,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,Number.POSITIVE_INFINITY),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,t.sep),this.fsScandirSettings=new n.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(e,t){return null!=e?e:t}}}}),Ie=L({"../../node_modules/.pnpm/@nodelib+fs.walk@1.2.8/node_modules/@nodelib/fs.walk/out/index.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Settings=e.walkStream=e.walkSync=e.walk=void 0;var t=Le(),n=je(),r=Fe(),i=Ne();function s(e={}){return e instanceof i.default?e:new i.default(e)}e.Settings=i.default,e.walk=function(e,n,r){"function"!=typeof n?new t.default(e,s(n)).read(r):new t.default(e,s()).read(n)},e.walkSync=function(e,t){const n=s(t);return new r.default(e,n).read()},e.walkStream=function(e,t){const r=s(t);return new n.default(e,r).read()}}}),He=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/readers/reader.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=T("path"),n=me(),r=ue();e.default=class{constructor(e){this._settings=e,this._fsStatSettings=new n.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(e){return t.resolve(this._settings.cwd,e)}_makeEntry(e,t){const n={name:t,path:t,dirent:r.fs.createDirentFromStats(t,e)};return this._settings.stats&&(n.stats=e),n}_isFatalError(e){return!r.errno.isEnoentCodeError(e)&&!this._settings.suppressErrors}}}}),De=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/readers/stream.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=T("stream"),n=me(),r=Ie(),i=He(),s=class extends i.default{constructor(){super(...arguments),this._walkStream=r.walkStream,this._stat=n.stat}dynamic(e,t){return this._walkStream(e,t)}static(e,n){const r=e.map(this._getFullEntryPath,this),i=new t.PassThrough({objectMode:!0});i._write=(t,s,o)=>this._getEntry(r[t],e[t],n).then((e=>{null!==e&&n.entryFilter(e)&&i.push(e),t===r.length-1&&i.end(),o()})).catch(o);for(let e=0;e<r.length;e++)i.write(e);return i}_getEntry(e,t,n){return this._getStat(e).then((e=>this._makeEntry(e,t))).catch((e=>{if(n.errorFilter(e))return null;throw e}))}_getStat(e){return new Promise(((t,n)=>{this._stat(e,this._fsStatSettings,((e,r)=>null===e?t(r):n(e)))}))}};e.default=s}}),Be=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/readers/async.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ie(),n=He(),r=De(),i=class extends n.default{constructor(){super(...arguments),this._walkAsync=t.walk,this._readerStream=new r.default(this._settings)}dynamic(e,t){return new Promise(((n,r)=>{this._walkAsync(e,t,((e,t)=>{null===e?n(t):r(e)}))}))}async static(e,t){const n=[],r=this._readerStream.static(e,t);return new Promise(((e,t)=>{r.once("error",t),r.on("data",(e=>n.push(e))),r.once("end",(()=>e(n)))}))}};e.default=i}}),Ue=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/providers/matchers/matcher.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ue();e.default=class{constructor(e,t,n){this._patterns=e,this._settings=t,this._micromatchOptions=n,this._storage=[],this._fillStorage()}_fillStorage(){for(const e of this._patterns){const t=this._getPatternSegments(e),n=this._splitSegmentsIntoSections(t);this._storage.push({complete:n.length<=1,pattern:e,segments:t,sections:n})}}_getPatternSegments(e){return t.pattern.getPatternParts(e,this._micromatchOptions).map((e=>t.pattern.isDynamicPattern(e,this._settings)?{dynamic:!0,pattern:e,patternRe:t.pattern.makeRe(e,this._micromatchOptions)}:{dynamic:!1,pattern:e}))}_splitSegmentsIntoSections(e){return t.array.splitWhen(e,(e=>e.dynamic&&t.pattern.hasGlobStar(e.pattern)))}}}}),Ge=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/providers/matchers/partial.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Ue(),n=class extends t.default{match(e){const t=e.split("/"),n=t.length,r=this._storage.filter((e=>!e.complete||e.segments.length>n));for(const e of r){const r=e.sections[0];if(!e.complete&&n>r.length)return!0;if(t.every(((t,n)=>{const r=e.segments[n];return!(!r.dynamic||!r.patternRe.test(t))||!r.dynamic&&r.pattern===t})))return!0}return!1}};e.default=n}}),We=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/providers/filters/deep.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ue(),n=Ge();e.default=class{constructor(e,t){this._settings=e,this._micromatchOptions=t}getFilter(e,t,n){const r=this._getMatcher(t),i=this._getNegativePatternsRe(n);return t=>this._filter(e,t,r,i)}_getMatcher(e){return new n.default(e,this._settings,this._micromatchOptions)}_getNegativePatternsRe(e){const n=e.filter(t.pattern.isAffectDepthOfReadingPattern);return t.pattern.convertPatternsToRe(n,this._micromatchOptions)}_filter(e,n,r,i){if(this._isSkippedByDeep(e,n.path))return!1;if(this._isSkippedSymbolicLink(n))return!1;const s=t.path.removeLeadingDotSegment(n.path);return!this._isSkippedByPositivePatterns(s,r)&&this._isSkippedByNegativePatterns(s,i)}_isSkippedByDeep(e,t){return this._settings.deep!==1/0&&this._getEntryLevel(e,t)>=this._settings.deep}_getEntryLevel(e,t){const n=t.split("/").length;if(""===e)return n;return n-e.split("/").length}_isSkippedSymbolicLink(e){return!this._settings.followSymbolicLinks&&e.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(e,t){return!this._settings.baseNameMatch&&!t.match(e)}_isSkippedByNegativePatterns(e,n){return!t.pattern.matchAny(e,n)}}}}),Ve=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/providers/filters/entry.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ue();e.default=class{constructor(e,t){this._settings=e,this._micromatchOptions=t,this.index=new Map}getFilter(e,n){const r=t.pattern.convertPatternsToRe(e,this._micromatchOptions),i=t.pattern.convertPatternsToRe(n,Object.assign(Object.assign({},this._micromatchOptions),{dot:!0}));return e=>this._filter(e,r,i)}_filter(e,n,r){const i=t.path.removeLeadingDotSegment(e.path);if(this._settings.unique&&this._isDuplicateEntry(i))return!1;if(this._onlyFileFilter(e)||this._onlyDirectoryFilter(e))return!1;if(this._isSkippedByAbsoluteNegativePatterns(i,r))return!1;const s=e.dirent.isDirectory(),o=this._isMatchToPatterns(i,n,s)&&!this._isMatchToPatterns(i,r,s);return this._settings.unique&&o&&this._createIndexRecord(i),o}_isDuplicateEntry(e){return this.index.has(e)}_createIndexRecord(e){this.index.set(e,void 0)}_onlyFileFilter(e){return this._settings.onlyFiles&&!e.dirent.isFile()}_onlyDirectoryFilter(e){return this._settings.onlyDirectories&&!e.dirent.isDirectory()}_isSkippedByAbsoluteNegativePatterns(e,n){if(!this._settings.absolute)return!1;const r=t.path.makeAbsolute(this._settings.cwd,e);return t.pattern.matchAny(r,n)}_isMatchToPatterns(e,n,r){const i=t.pattern.matchAny(e,n);return!i&&r?t.pattern.matchAny(e+"/",n):i}}}}),ze=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/providers/filters/error.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ue();e.default=class{constructor(e){this._settings=e}getFilter(){return e=>this._isNonFatalError(e)}_isNonFatalError(e){return t.errno.isEnoentCodeError(e)||this._settings.suppressErrors}}}}),qe=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/providers/transformers/entry.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ue();e.default=class{constructor(e){this._settings=e}getTransformer(){return e=>this._transform(e)}_transform(e){let n=e.path;return this._settings.absolute&&(n=t.path.makeAbsolute(this._settings.cwd,n),n=t.path.unixify(n)),this._settings.markDirectories&&e.dirent.isDirectory()&&(n+="/"),this._settings.objectMode?Object.assign(Object.assign({},e),{path:n}):n}}}}),Ke=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/providers/provider.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=T("path"),n=We(),r=Ve(),i=ze(),s=qe();e.default=class{constructor(e){this._settings=e,this.errorFilter=new i.default(this._settings),this.entryFilter=new r.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new n.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new s.default(this._settings)}_getRootDirectory(e){return t.resolve(this._settings.cwd,e.base)}_getReaderOptions(e){const t="."===e.base?"":e.base;return{basePath:t,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(t,e.positive,e.negative),entryFilter:this.entryFilter.getFilter(e.positive,e.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}}}}),Qe=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/providers/async.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Be(),n=Ke(),r=class extends n.default{constructor(){super(...arguments),this._reader=new t.default(this._settings)}async read(e){const t=this._getRootDirectory(e),n=this._getReaderOptions(e);return(await this.api(t,e,n)).map((e=>n.transform(e)))}api(e,t,n){return t.dynamic?this._reader.dynamic(e,n):this._reader.static(t.patterns,n)}};e.default=r}}),Ye=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/providers/stream.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=T("stream"),n=De(),r=Ke(),i=class extends r.default{constructor(){super(...arguments),this._reader=new n.default(this._settings)}read(e){const n=this._getRootDirectory(e),r=this._getReaderOptions(e),i=this.api(n,e,r),s=new t.Readable({objectMode:!0,read:()=>{}});return i.once("error",(e=>s.emit("error",e))).on("data",(e=>s.emit("data",r.transform(e)))).once("end",(()=>s.emit("end"))),s.once("close",(()=>i.destroy())),s}api(e,t,n){return t.dynamic?this._reader.dynamic(e,n):this._reader.static(t.patterns,n)}};e.default=i}}),Xe=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/readers/sync.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=me(),n=Ie(),r=He(),i=class extends r.default{constructor(){super(...arguments),this._walkSync=n.walkSync,this._statSync=t.statSync}dynamic(e,t){return this._walkSync(e,t)}static(e,t){const n=[];for(const r of e){const e=this._getFullEntryPath(r),i=this._getEntry(e,r,t);null!==i&&t.entryFilter(i)&&n.push(i)}return n}_getEntry(e,t,n){try{const n=this._getStat(e);return this._makeEntry(n,t)}catch(e){if(n.errorFilter(e))return null;throw e}}_getStat(e){return this._statSync(e,this._fsStatSettings)}};e.default=i}}),Je=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/providers/sync.js"(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Xe(),n=Ke(),r=class extends n.default{constructor(){super(...arguments),this._reader=new t.default(this._settings)}read(e){const t=this._getRootDirectory(e),n=this._getReaderOptions(e);return this.api(t,e,n).map(n.transform)}api(e,t,n){return t.dynamic?this._reader.dynamic(e,n):this._reader.static(t.patterns,n)}};e.default=r}}),Ze=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/settings.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;var t=T("fs"),n=T("os"),r=Math.max(n.cpus().length,1);e.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:t.lstat,lstatSync:t.lstatSync,stat:t.stat,statSync:t.statSync,readdir:t.readdir,readdirSync:t.readdirSync};e.default=class{constructor(e={}){this._options=e,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,r),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0),this.ignore=[].concat(this.ignore)}_getValue(e,t){return void 0===e?t:e}_getFileSystemMethods(t={}){return Object.assign(Object.assign({},e.DEFAULT_FILE_SYSTEM_ADAPTER),t)}}}}),et=L({"../../node_modules/.pnpm/fast-glob@3.3.2/node_modules/fast-glob/out/index.js"(e,t){var n=pe(),r=Qe(),i=Ye(),s=Je(),o=Ze(),a=ue();async function l(e,t){u(e);const n=c(e,r.default,t),i=await Promise.all(n);return a.array.flatten(i)}function c(e,t,r){const i=[].concat(e),s=new o.default(r),a=n.generate(i,s),l=new t(s);return a.map(l.read,l)}function u(e){if(![].concat(e).every((e=>a.string.isString(e)&&!a.string.isEmpty(e))))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}!function(e){function t(e,t){u(e);const n=c(e,s.default,t);return a.array.flatten(n)}function r(e,t){u(e);const n=c(e,i.default,t);return a.stream.merge(n)}var l,p;e.glob=e,e.globSync=t,e.globStream=r,e.async=e,e.sync=t,e.stream=r,e.generateTasks=function(e,t){u(e);const r=[].concat(e),i=new o.default(t);return n.generate(r,i)},e.isDynamicPattern=function(e,t){u(e);const n=new o.default(t);return a.pattern.isDynamicPattern(e,n)},e.escapePath=function(e){return u(e),a.path.escape(e)},e.convertPathToPattern=function(e){return u(e),a.path.convertPathToPattern(e)},(l=e.posix||(e.posix={})).escapePath=function(e){return u(e),a.path.escapePosixPath(e)},l.convertPathToPattern=function(e){return u(e),a.path.convertPosixPathToPattern(e)},(p=e.win32||(e.win32={})).escapePath=function(e){return u(e),a.path.escapeWindowsPath(e)},p.convertPathToPattern=function(e){return u(e),a.path.convertWindowsPathToPattern(e)}}(l||(l={})),t.exports=l}}),tt=128;var nt,rt={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49],blackStylize:["#121212","#eeeeee18"],redStylize:["#cb7676","#ab5959"],greenStylize:["#4d9375","#1e754f"],yellowStylize:["#f6c177","#f6c17790"],blueStylize:["#6394bf","#296aa3"],magentaStylize:["#c391e6","#c391e690"],pinkStylize:["#ed9cc2","#ed9cc290"],cyanStylize:["#5eaab5","#2993a3"],whiteStylize:["#ffffff","#ffffff9f"],grayStylize:["#888888","#444444"]},it=l.prototype.hasColors(),st=(e,t)=>{if(!it)return e=>e;const n=`[${e}m`,r=`[${t}m`;return e=>{const t=`${e}`;let i=t.indexOf(r);if(-1===i)return n+t+r;let s=n,o=0;for(;-1!==i;)s+=t.slice(o,i)+n,o=i+r.length,i=t.indexOf(r,o);return s+=t.slice(o)+r,s}},ot=(nt=(e,t,n)=>st(`38;2;${e};${t};${n}`,39),e=>{const[t,n,r]=(e=>{let[,t]=/([\da-f]{3,6})/i.exec(e)||[];const n=t?t.length:0;if(3===n)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(6!==n)return[0,0,0];const r=Number.parseInt(t,16);return[r>>16&255,r>>8&255,255&r]})(e);return nt(t,n,r)}),at=st(...rt.bold),lt=st(...rt.dim),ct=st(...rt.underline);ot(rt.blackStylize[0]),ot(rt.blackStylize[1]);var ut=ot(rt.redStylize[0]);ot(rt.redStylize[1]);var pt=ot(rt.greenStylize[0]);ot(rt.greenStylize[1]);var dt=ot(rt.yellowStylize[0]);ot(rt.yellowStylize[1]),ot(rt.blueStylize[0]),ot(rt.blueStylize[1]);var ft=ot(rt.magentaStylize[0]);ot(rt.magentaStylize[1]);var ht=ot(rt.pinkStylize[0]);ot(rt.pinkStylize[1]);var gt=ot(rt.cyanStylize[0]);ot(rt.cyanStylize[1]),ot(rt.whiteStylize[0]);var mt=ot(rt.whiteStylize[1]),yt=ot(rt.grayStylize[0]);ot(rt.grayStylize[1]);function _t(e,t,n,i=1){const s=g.diffWords(e,t);let o="";s.forEach(((e,t)=>{const n=t>0&&(s[t-1]?.added||s[t-1]?.removed),r=t<s.length-1&&(s[t+1]?.added||s[t+1]?.removed);let a="";if(e.added)a=pt(at(e.value));else if(e.removed)a=ut(e.value);else if(n&&r){const t=e.value.split("\n");a=t.length-1>2*i?[t.slice(0,i).join("\n"),"...",t.slice(-i-1).join("\n")].join("\n"):lt(e.value)}else n?a=e.value.split("\n").slice(0,i+1).join("\n"):r&&(a=e.value.split("\n").slice(-i-1).join("\n"));o+=a})),r.note(o,`Take a look at changes in ${gt(n)}`)}var bt=h.promisify(f),vt=(e,t)=>e instanceof Error?t.error(e):t.unknown(e),St=(e,t)=>{try{let n=!1;const r=((e,t)=>{let n;return new Promise(((r,i)=>{e.then((e=>{n&&clearTimeout(n),r(e)})).catch((()=>{i(new Error)})),n=setTimeout((()=>{i(new Error)}),t)}))})(e,t).catch((()=>{n=!0}));if(n)return;return r}catch(e){return}},Et=[{label:"Visual Studio Code",value:"code"},{label:"Visual Studio Code Insiders",value:"code-insiders"},{label:"Cursor",value:"cursor"}],xt=e=>new Ln({message:"Please install vscode's `code` CLI before continuing",context:{error:e}}),wt=async()=>{if("Cursor"===qn.IDE_NAME){const e=await fetch("https://marketplace.visualstudio.com/_apis/public/gallery/extensionquery",{method:"POST",body:JSON.stringify({filters:[{criteria:[{filterType:4,value:"c76878d7-9496-4200-bf09-b930e13c3f07"},{filterType:8,value:"Microsoft.VisualStudio.Code"},{filterType:12,value:"4096"}],pageNumber:1,pageSize:1,sortBy:0,sortOrder:0}],assetTypes:[],flags:950}),headers:{accept:"application/json;api-version=3.0-preview.1","Content-Type":"application/json"}}).then((e=>e.json())),n=e.results?.[0],r=n?.extensions?.[0],i=r?.versions?.[0]?.version;if(!i)return Wn({event:"wizard-extension-install-failed",message:"Failed to get extension version"}),!1;const s=await fetch(`https://marketplace.visualstudio.com/_apis/public/gallery/publishers/million/vsextensions/million-lint/${i}/vspackage`).then((e=>e.arrayBuffer())).then((e=>Buffer.from(e))),o=t.join(process.cwd(),`million-lint-${i}.vsix`);await u.writeFile(o,s);const a=await St(bt(`${qn.CLI_COMMAND} --install-extension ${o} --force`),2e4);if(a?.stderr)return Wn({event:"wizard-extension-install-failed",message:a?.stderr||a?.stdout||"unknown"}),!1;const l=e=>Boolean(e?.stdout)&&!e.stdout.toLowerCase().includes("failed");return await u.unlink(o),l(a)}const e=await St(bt(`${qn.CLI_COMMAND} --install-extension million.million-lint --force`),2e4);if(e?.stderr)return Wn({event:"wizard-extension-install-failed",message:e?.stderr||e?.stdout||"unknown"}),!1;return n=e,Boolean(n?.stdout)&&!n.stdout.toLowerCase().includes("failed");var n},At=o.gen((function*(){const e=r.spinner(),t=yield*o.all(Et.map((e=>o.promise((()=>(async e=>{try{const t=await St(bt(`${e.value} -v`),3e3);if(t.stderr)return Wn({event:"wizard-command-check-failed",message:t.stderr}),null;if(t?.stdout)return e}catch{}return null})(e)))))).pipe(o.map((e=>e.filter((e=>!!e)))));t.length||(yield*new Ln({message:"No available editor CLI commands. Please install `code` or `cursor` cli helper for automatic installation. You can also install the extension manually via extensions marketplace."}));const n=yield*(e=>o.gen((function*(){return 1===e.length?((yield*o.tryPromise((()=>r.confirm({message:`Do you want to use Million Lint in ${e[0].label}?`}))).pipe(zn("confirm-ide")))||(yield*new Ln({message:"No other editors compatible with Million Lint found.",fixHint:yield*(t=e[0],o.gen((function*(){switch(t.value){case"code":return"For automatic installation of Million Lint into cursor, please install the `cursor` cli helper";case"cursor":return"For automatic installation of Million Lint into vscode, please install the `code` cli helper"}yield*o.dieMessage("Only VSCode and Cursor are supported")})))})),e[0].value):yield*o.tryPromise((()=>r.select({message:"Which editor will you be using Million Lint in:",options:e.map((e=>e?{label:e.label,value:e.value}:null)).filter(Boolean)}))).pipe(zn("which-ide-stage"));var t})))(t).pipe(o.flatMap((e=>"string"==typeof e?o.succeed(e):o.dieMessage("command should always be a string")))),i=Et.find((e=>e.value===n))?.label;if(!i)return yield*o.dieMessage("commands.find should always return a real value");e.start("Checking if Million Lint is installed"),qn.CLI_COMMAND=n,qn.IDE_NAME=i,qn.IDE_VERSION=yield*(e=>o.tryPromise({try:()=>bt(`${e} --version`),catch:xt}).pipe(o.timeout("3 seconds"),o.map((({stdout:e})=>e.split("\n")[0]))))(n);const s=yield*(e=>o.tryPromise({try:()=>bt(`${e} --list-extensions --show-versions`),catch:xt}).pipe(o.timeout("3 seconds"),o.map((({stdout:e})=>{const t=e.split("\n");if(t)for(const e of t)if(e.includes("million.million-lint"))return qn.MILLION_VERSION=e,!0;return!1}))))(n);if(!s){if(yield*o.tryPromise(wt).pipe(o.catchAll((()=>o.succeed(!1)))))e.stop(`Installed ${i} extension`);else{e.stop(dt("⚠️ Failed to install extension. Try install via the marketplace: https://marketplace.visualstudio.com/items?itemName=million.million-lint"));(yield*o.tryPromise((()=>r.confirm({message:"Would you like to continue with setup?",initialValue:!0}))).pipe(zn("would-you-like-to-continue-with-setup")))||(yield*new $n({logMessage:"Could not install extension"}))}return}e.stop("Extension found");if(!(yield*o.tryPromise((()=>r.confirm({message:"Would you like to update the Million Lint extension?",initialValue:!0}))).pipe(zn("should-install-extension"))))return;const a=r.spinner();a.start();if(yield*o.tryPromise(wt).pipe(o.catchAll((e=>(Wn({type:"error",event:"wizard-update-extension",properties:{error:e}}),o.succeed(!1))))))return void a.stop("Extension updated");a.stop(dt("⚠️ Failed to update extension. Try updating via the marketplace: https://marketplace.visualstudio.com/items?itemName=million.million-lint"));(yield*o.tryPromise((()=>r.confirm({message:"Would you like to continue with setup?",initialValue:!0}))).pipe(zn("would-you-like-to-use-older-version-anyways")))||(yield*new $n({logMessage:"User did not want to continue after failing to update extension"}))})),kt=j(M()),Rt=j(et()),Pt=class{value;next;constructor(e){this.value=e}},Ct=class{#e;#t;#n;constructor(){this.clear()}enqueue(e){const t=new Pt(e);this.#e?(this.#t.next=t,this.#t=t):(this.#e=t,this.#t=t),this.#n++}dequeue(){const e=this.#e;if(e)return this.#e=this.#e.next,this.#n--,e.value}peek(){if(this.#e)return this.#e.value}clear(){this.#e=void 0,this.#t=void 0,this.#n=0}get size(){return this.#n}*[Symbol.iterator](){let e=this.#e;for(;e;)yield e.value,e=e.next}};function Ot(e){if(!Number.isInteger(e)&&e!==Number.POSITIVE_INFINITY||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}var $t={name:"yarn",label:"yarn",lockFile:"yarn.lock",installCommand:"yarn add",dlxCommand:"npx"},Tt={name:"pnpm",label:"pnpm",lockFile:"pnpm-lock.yaml",installCommand:"pnpm install",dlxCommand:"pnpx"},Lt={name:"npm",label:"npm",lockFile:"package-lock.json",installCommand:"npm install",dlxCommand:"npx"},jt={name:"bun",label:"bun",lockFile:"bun.lockb",installCommand:"bun add",dlxCommand:"bunx"},Mt=[Tt,$t,jt,Lt],Ft={name:"craco",label:"Create React App",bundler:"webpack",prefix:"MillionLint.craco",configFilePath:"craco.config.js",possibleFileNames:["craco.config.js","craco.config.mjs","craco.config.cjs","craco.config.ts"],millionLint:{configFileContent:"const MillionLint = require('@million/lint').default;\nmodule.exports = {\n  plugins: [MillionLint.craco()],\n};"}},Nt=[{name:"next",label:"Next.js",bundler:"next",prefix:"MillionLint.next",configFilePath:"next.config.mjs",possibleFileNames:["next.config.js","next.config.mjs","next.config.cjs","next.config.ts"],millionLint:{configFileContent:"import MillionLint from '@million/lint';\n\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  reactStrictMode: true,\n};\n\nexport default MillionLint.next()(nextConfig);",configFileContentRSC:"import MillionLint from '@million/lint';\n\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  reactStrictMode: true,\n};\n\nexport default MillionLint.next({ rsc: true })(nextConfig);"}},{name:"astro",label:"Astro",bundler:"vite",prefix:"MillionLint.vite",configFilePath:"astro.config.mjs",possibleFileNames:["astro.config.js","astro.config.mjs","astro.config.cjs","astro.config.ts"],millionLint:{configFileContent:"import { defineConfig } from 'astro/config';\nimport MillionLint from '@million/lint';\n\nexport default defineConfig({\n  integrations: [MillionLint.astro()]\n});"}},{name:"gatsby",label:"Gatsby",bundler:"webpack",prefix:"MillionLint.webpack",configFilePath:"gatsby-node.js",possibleFileNames:["gatsby-node.js","gatsby-node.ts","gatsby-config.js","gatsby-config.ts"],millionLint:{configFileContent:"const MillionLint = require('@million/lint').default;\n\nexports.onCreateWebpackConfig = ({ actions }) => {\n  actions.setWebpackConfig({\n    plugins: [MillionLint.webpack()],\n  })\n};"}},{name:"vite",label:"Vite",bundler:"vite",prefix:"MillionLint.vite",configFilePath:"vite.config.js",possibleFileNames:["vite.config.js","vite.config.mjs","vite.config.mts","vite.config.cjs","vite.config.ts"],millionLint:{configFileContent:"import MillionLint from '@million/lint';\nimport react from \"@vitejs/plugin-react\";\nimport { defineConfig } from 'vite';\n\nexport default defineConfig({\n  plugins: [MillionLint.vite(), react()],\n});"}},Ft,{name:"webpack",label:"Webpack",bundler:"webpack",prefix:"MillionLint.webpack",configFilePath:"webpack.config.js",possibleFileNames:["webpack.config.js","webpack.config.cjs","webpack.config.mjs","webpack.config.ts"],millionLint:{configFileContent:"const MillionLint = require('@million/lint').default;\nconst MillionLint = require('@million/lint').default;\nmodule.exports = {\n  plugins: [\n    MillionLint.webpack(),\n  ],\n};"}},{name:"rollup",label:"Rollup",bundler:"rollup",prefix:"MillionLint.rollup",configFilePath:"rollup.config.js",possibleFileNames:["rollup.config.js","rollup.config.mjs","rollup.config.cjs","rollup.config.ts"],millionLint:{configFileContent:"import MillionLint from '@million/lint';\n\nexport default {\n  plugins: [MillionLint.rollup()],\n};"}}],It=Nt.map((e=>[e.bundler,e.possibleFileNames])),Ht=`**/{${It.map((([,e])=>e.join(","))).join(",")}}`,Dt=function(e){Ot(e);const t=new Ct;let n=0;const r=()=>{n<e&&t.size>0&&(t.dequeue()(),n++)},i=async(e,t,i)=>{const s=(async()=>e(...i))();t(s);try{await s}catch{}n--,r()},s=(s,...o)=>new Promise((a=>{((s,o,a)=>{new Promise((e=>{t.enqueue(e)})).then(i.bind(void 0,s,o,a)),(async()=>{await Promise.resolve(),n<e&&r()})()})(s,a,o)}));return Object.defineProperties(s,{activeCount:{get:()=>n},pendingCount:{get:()=>t.size},clearQueue:{value(){t.clear()}},concurrency:{get:()=>e,set(i){Ot(i),e=i,queueMicrotask((()=>{for(;n<e&&t.size>0;)r()}))}}}),s}(3);async function Bt(t){const n=await(0,Rt.default)("**/.gitignore",{cwd:t,ignore:["**/node_modules/**"],absolute:!0,onlyFiles:!0,dot:!0}),r={};return await Promise.all(n.map((async t=>{const n=e.dirname(t);try{const e=await c.readFile(t,"utf8"),i=(0,kt.default)();i.add(e),r[n]=i}catch(e){}}))),r}var Ut=[],Gt=async(t,n,r)=>Promise.race(t.map((async t=>{let i=await(0,Rt.default)(r,{cwd:t,ignore:["**/node_modules/**"],onlyFiles:!0,absolute:!0});return i=i.filter((r=>!function(t,n,r){if(!t.startsWith(r))return console.error("THIS BRANCH SHOULDNT RUN OUTSIDE OF RARE CASES"),!1;const i=e.relative(r,t).split(e.sep);for(let t=i.length;t>=0;t--){const s=n[e.join(r,...i.slice(0,t))];if(s){const e=i.slice(t).join("/");if(s.ignores(e))return!0}}return!1}(r,n,t))),i}))),Wt=async e=>Ut.length?Ut:Promise.all(e.map((e=>Dt((async()=>{const[t]=It.find((([,t])=>t.includes(e.split("/").pop())))??[void 0],n=await c.stat(e);return{filename:e,framework:t,lastModified:n||-1,from:"typescript"}})))));var Vt=({packageManager:e,packageNames:t,flags:n=[],cwd:i,onErrorsEncounteredOnInstall:s,onInstalled:a})=>o.gen((function*(){const l=t=>new Ln({fixHint:`This is most likely a problem with your package manager configuration. Try installing again via ${e.name}, then run ${at("npx million@latest")}.`,message:vt(t,{error:t=>`Failed to execute command using ${e.installCommand}: ${t.message}`,unknown:()=>`Failed to execute command using ${e.installCommand}`})}),c=`${e.installCommand} ${t.map((e=>`${e}@latest`)).join(" ")} ${n.join(" ")}`,{stderr:u}=yield*o.tryPromise({try:()=>bt(c,{cwd:i}),catch:l});if(!u)return void a?.();"npm"===e.name&&n.push("--legacy-peer-deps"),"yarn"!==e.name&&"pnpm"!==e.name||n.push("--ignore-workspace-root-check");const p=`${e.installCommand} ${t.map((e=>`${e}@latest`)).join(" ")} ${n.join(" ")}`;if(p===c)return void s?.(u);const{stderr:d}=yield*o.tryPromise({try:()=>bt(p,{cwd:i}),catch:l});if(d){s?.(d);const t="npm"===e.name&&d.includes("npm ERR"),n="yarn"===e.name&&d.includes("error "),i="pnpm"===e.name&&d.includes("ERR_"),a="bun"===e.name&&d.includes("error: "),l=t||n||i||a?"Error":"Warnings";r.log.error(ut(`${l} during installation. ${d}`));(yield*o.tryPromise({try:()=>r.confirm({message:"Above errors encountered when trying to install @million/lint, do you still want to continue?",initialValue:!0}),catch:e=>new Tn({context:{error:e}})}))||(yield*new $n({logMessage:"canceled after being unable to install @million/lint",context:{stderr:d}}))}a?.()})),zt=e=>o.gen((function*(){const t=yield*o.tryPromise({try:()=>async function(e){const t=await m({cwd:e});if(!t)return null;const[n]=t.split("@");switch(n){case"yarn":return $t;case"pnpm":return Tt;case"npm":return Lt;case"bun":return jt;default:return null}}(e),catch:e=>new jn({message:vt(e,{error:e=>`Unable to read lock file: ${e.message}`,unknown:()=>"Unable to read lock file"})})});return t||(yield*o.tryPromise({try:()=>r.select({message:"Please select your package manager.",options:Mt.map((e=>({value:e,label:e.label,hint:`Be sure you have ${at(e.label)} installed.`})))}),catch:e=>new Tn({context:{error:e}})}).pipe(zn("select-package-manager")))})),qt=({packageJsonContents:e,packageJsonPath:n,packages:i,cwd:s})=>o.gen((function*(){const a=yield*o.tryPromise({try:()=>Bt(s),catch:e=>new jn({message:vt(e,{error:e=>`Failed to establish git ignored files: ${e.message}`,unknown:()=>"Failed to establish git ignored files"}),context:{error:e}})}),l=yield*o.tryPromise({try:()=>Gt([s],a,Ht),catch:e=>new jn({message:vt(e,{error:e=>`Error encountered when searching for build configuration files: ${e.message}`,unknown:()=>"Error encountered when searching for build configuration files"})})}).pipe(o.map(Wt),o.flatMap((e=>o.promise((()=>e)))),o.map((e=>e.map((e=>({...e,filename:t.relative(s,e.filename)}))))),o.map((e=>{return(t=e,t.map((e=>{const t=Nt.find((t=>t.name===e.framework));return t?{buildTool:{...t,configFilePath:e.filename}}:null})).filter((e=>Boolean(e)))).filter((e=>!!e));var t})));if(function(e){if(!e)return!1;if(e.includes("react-scripts start"))return!0;return!1}(e)){if(yield*o.tryPromise({try:()=>r.confirm({message:"Ordinary create-react-app projects are not supported. Do you want to use craco instead of react-scripts?"}),catch:e=>new Tn({logMessage:"Failure during confirmation prompt",context:{error:e}})}).pipe(zn("switch-to-craco"))){qn.INIT_CRACO=!0,yield*Kt(e,i,t.dirname(n));const r={...Ft};return r.configFilePath=t.relative(s,t.join(t.dirname(n),"craco.config.js")),{buildTool:r,skipUpdateConfigFile:!0}}yield*new $n({logMessage:"choose-not-to-install-craco"})}const c=l.at(0);if(!c)return yield*new Ln({message:"No supported build tool found. To learn more about supported build tools, view our documentation at https://million.dev/docs#manual-installation"});if(1===l.length)return r.log.success(`Detected ${gt(at(l[0].buildTool.label))} project.`),{...c,skipUpdateConfigFile:!1};const u=l.find((e=>t.dirname(e.buildTool.configFilePath)===t.dirname(n)));if(u)return{...u,skipUpdateConfigFile:!1};const p=yield*o.tryPromise({try:()=>r.select({message:"Detected multiple build tools. Please select one:",options:l.map((e=>({value:e.buildTool.configFilePath}))),initialValue:l[0].buildTool.configFilePath}),catch:e=>new Tn({logMessage:"Failure at detected multiple build tools select",context:{error:e}})}).pipe(zn("tool-multi-select")),d=l.find((e=>e.buildTool.configFilePath===p));if(!d)return yield*o.dieMessage("Invariant: selection must exist as selection was picked from the search array");return t.dirname(d.buildTool.configFilePath??"/")!==t.dirname(t.relative(n,n))&&r.log.warn(`package.json and ${d.buildTool.configFilePath} are in different directories: \n- ${n}\n- ${d.buildTool.configFilePath}`),{...d,skipUpdateConfigFile:!1}}));var Kt=(e,n,i)=>o.gen((function*(){const s=e.replace("react-scripts start","craco start").replace("react-scripts build","craco build").replace("react-scripts test","craco test"),a=["@craco/craco",...n].map((e=>gt(at(e)))).join(", "),l=yield*zt(i);yield*o.tryPromise({try:()=>p.promises.writeFile(t.join(i,"package.json"),s),catch:e=>new jn({message:vt(e,{error:e=>`Failed to replace react-scripts in package.json: ${e.message}`,unknown:()=>"Failed to replace react-scripts in package.json"})})}),yield*o.tryPromise({try:()=>p.promises.writeFile(t.join(i,"craco.config.js"),Ft.millionLint.configFileContent),catch:e=>new jn({message:vt(e,{error:e=>`Failed to create craco.config.js: ${e.message}`,unknown:()=>"Failed to create craco.config.js"})})}),r.log.info("Created craco.config.js");const c=r.spinner();c.start(`Installing ${a}...`),yield*Vt({packageManager:l,packageNames:["@craco/craco"],cwd:i,flags:["-D"],onErrorsEncounteredOnInstall:e=>{c.stop(ut(e))}}),yield*Vt({packageManager:l,packageNames:n,cwd:i,onErrorsEncounteredOnInstall:e=>{c.stop(ut(e))},onInstalled:()=>{c.stop(`Installed ${a}`)}})})),Qt=e=>o.gen((function*(){const t=yield*Yt(e);return{packageJson:yield*o.try({try:()=>JSON.parse(t),catch:t=>new Ln({message:`Your package.json at ${e} is not valid JSON, aborting.`,context:{error:t}})}),packageJsonContents:t}})),Yt=e=>o.gen((function*(){return yield*o.tryPromise({try:()=>u.readFile(t.join(e,"package.json"),"utf8"),catch:e=>new Tn({logMessage:"Path should always point to a valid package.json",context:{error:e}})})})),Xt=o.gen((function*(){const e=qn.CWD,n=yield*o.tryPromise({try:()=>Bt(e),catch:e=>new jn({message:vt(e,{error:e=>`Failed to establish git ignored files: ${e.message}`,unknown:()=>"Failed to establish git ignored files"})})}),i=yield*o.tryPromise({try:()=>Gt([e],n,"**/package.json"),catch:e=>new jn({message:vt(e,{error:e=>`Error encountered when searching for package.json files: ${e.message}`,unknown:()=>"Error encountered when searching for package.json files"})})}),s=i.at(0);s||(yield*new Ln({message:"No package.json found in project"}));const a=yield*o.gen((function*(){if(!s)return yield*o.dieMessage("No longer a non escaping function");if(1===i.length)return s;const n=i.toSorted();return yield*o.tryPromise({try:()=>r.select({message:"Detected multiple package.json files. Select one:",options:n.map((n=>({value:t.relative(e,n)}))),initialValue:t.relative(e,i[0])}),catch:e=>new Tn({logMessage:"Multiple package.json select failed",context:{error:e}})}).pipe(zn("detected-multiple-package-json"))})),l=yield*Qt(t.dirname(a)),{buildTool:c,skipUpdateConfigFile:u}=yield*qt({packageJsonContents:l.packageJsonContents,packageJsonPath:a,packages:["@million/lint"],cwd:e});return qn.BUILD_TOOL=c.name,{...l,packageJsonPath:a,buildTool:c,skipUpdateConfigFile:u}})),Jt=e=>o.gen((function*(){if(qn.INIT_CRACO)return;const n=t.dirname(e),i=yield*((e,t=["@million/lint"])=>o.gen((function*(){const n=[],r=yield*Qt(e),i=r?.packageJson;for(const e of t)i?.dependencies?.[e]&&n.push(e);return n})))(n,["@million/lint"]);yield*(({packageNames:e,alreadyInstalledPackageNames:t,askBeforeUpdating:n=!0,cwd:i,packageManager:s})=>o.gen((function*(){const a=e.map((e=>gt(at(e)))).join(", "),l=t?.map((e=>gt(at(e)))).join(", ");if(l?.length&&n&&!(yield*o.tryPromise({try:()=>r.confirm({message:`The ${l} package is already installed. Do you want to update it to the latest version?`}),catch:e=>new Tn({context:{error:e}})}).pipe(zn("should-update-package"))))return;const c=s||(yield*zt(i)),u=r.spinner();u.start(`${t?.length?"Updating":"Installing"} ${a} with ${at(c.label)}.`),yield*Vt({packageManager:c,packageNames:e,cwd:i,onErrorsEncounteredOnInstall:e=>{u.stop(ut(e))},onInstalled:()=>{u.stop(`${t?.length?"Updated":"Installed"} ${a} with ${at(c.label)}.`)}})})))({packageNames:["@million/lint"],alreadyInstalledPackageNames:i,cwd:n})})),Zt=o.gen((function*(){const e=qn.CWD;yield*(e=>o.gen((function*(){const n="# Million Lint\n.million\n",i=t.join(e,".gitignore");if(d.existsSync(i)){const e=yield*o.tryPromise({try:()=>u.readFile(i,"utf-8"),catch:e=>new jn({message:vt(e,{error:e=>`Aborting, could not read ${i}: ${e.message}`,unknown:()=>`Aborting, could not read ${i}`})})});if(e.includes(".million"))return;if(!(yield*o.tryPromise({try:()=>r.confirm({message:"Add the .million/ directory to your .gitignore?",initialValue:!0}),catch:e=>new $n({context:{error:e}})}).pipe(zn("should-update-git-ignore"))))return;const t=`${e}\n${n}`;yield*o.tryPromise({try:()=>u.writeFile(i,t),catch:e=>new jn({message:vt(e,{error:e=>`Unable to modify .gitignore: ${e.message}`,unknown:()=>"Unable to modify .gitignore"})})}),_t(e,t,i)}else{const e=n;yield*o.tryPromise({try:()=>u.writeFile(i,e),catch:e=>new jn({message:vt(e,{error:e=>`Aborting, could not write to ${i}: ${e.message}`,unknown:()=>`Aborting, could not write to ${i}`})})}),_t("",e,i)}})))(e)})),en=new Set(["<",">","{","}","[","]"]),tn=new Set(["for","do","while","if","else","return","function","var","let","const","true","false","undefined","this","new","delete","typeof","in","instanceof","void","break","continue","switch","case","default","throw","try","catch","finally","debugger","with","yield","async","await","class","extends","super","import","export","from","static"]),nn=new Set(["+","-","*","/","%","=","!","&","|","^","~","!","?",":",".",",",";","'",'"',".","(",")","[","]","#","@","\\",...en]),[rn,sn,on,an,ln,cn,un,pn,dn,fn,hn]=["identifier","keyword","string","class","property","entity","jsxliterals","sign","comment","break","space"].map(((e,t)=>t));function gn(e){return/^[^\S\r\n]+$/g.test(e)}function mn(e){return nn.has(e)}function yn(e){return/^[\w_]+$/.test(e)||_n(e)}function _n(e){return/[^\u0000-\u007f]/.test(e)}function bn(e){return/^[a-zA-Z]$/.test(e)}function vn(e){return bn(e)||_n(e)}function Sn(e){return vn(e[0])&&(1===e.length||yn(e.slice(1)))}function En(e){return"`"===e}function xn(e){return'"'===e||"'"===e}function wn(e){return"//"===(e=e.slice(0,2))||"/*"===e}function An(e){let t="",n=-1,r=[-1,""],i=[-2,""];const s=[];let o=!1,a=0,l=!1,c=0;const u=()=>o&&!l&&!a,p=()=>a&&!u(),d=()=>!a&&u()&&!l&&c>0;let f=null,h=0,g=0;const m=()=>null!==f,y=()=>g>h,_=()=>m()||y();function b(e){const t="\n"===e;if(p()){if(m())return on;const[,t]=r;if(Sn(e)&&("<"===t||"</"===t))return cn}if(d())return un;if(m())return on;if(tn.has(e))return"."===r[1]?rn:sn;if(t)return fn;if(gn(e))return hn;if(e.split("").every(mn))return pn;if(function(e){const t=e[0];return yn(t)&&t===t.toUpperCase()||"null"===e}(e))return p()?rn:an;if(Sn(e)){const e="."===r[1]&&Sn(i[1]);if(!_()&&!e)return rn;if(e)return ln}return on}const v=(e,o)=>{if(o&&(t=o),t){n=e||b(t);const o=[n,t];n!==hn&&n!==fn&&(i=r,r=o),s.push(o)}t=""};for(let n=0;n<e.length;n++){const i=e[n],s=e[n-1],p=e[n+1],m=s+i,b=i+p;if(xn(i)&&!d()){v(),"\\"!==s&&(f&&i===f?f=null:f||(f=i)),v(on,i);continue}if(!y()&&"\\n"!==s&&En(i)){v(),v(on,i),g++;continue}if(y()){if("\\n"!==s&&En(i)&&g>0){v(),g--,v(on,i);continue}if("${"===b){h++,v(on),v(pn,b),n++;continue}}if(g>0&&g===h&&"}"===i){v(),h--,v(pn,i);continue}if(u()&&"{"===i){v(),v(pn,i),l=!0;continue}if(o){if(!a&&"<"===i){v(),"/"===p?(a=2,t=b,n++):(a=1,t=i),v(pn);continue}if(a){if(">"===i&&!"/=".includes(s)){v(),1===a?(a=0,c++):(a=0,o=!1),v(pn,i);continue}if("/>"===b||"</"===b){"<"!==t&&"/"!==t&&v(),"/>"===b?a=0:c--,c||(o=!1),t=b,n++,v(pn);continue}if("<"===i){v(),t=i,v(pn);continue}if("-"===p&&!_()&&!d()&&t){v(ln,t+i+p),n+=1;continue}if("="===p&&!_()){const e=t?t+i:i;Sn(e)&&(t=e,v(ln));continue}}}!a&&("<"===i&&vn(p)||"</"===b)&&(a="/"===p?2:1,"<"!==i||"/"!==p&&!bn(p)||(o=!0));const x=xn(E=i)||En(E),w=y(),A=!o&&("/"===(S=b)[0]&&!wn(S[0]+S[1])),k=d();if(x||w||xn(f))t+=i;else if(A){v();const[s,o]=r;if(A&&-1!==s&&(s!==pn||")"===o)&&s!==dn){t=i,v();continue}const a=n++,l=()=>n>=e.length,c=()=>l()||"\n"===e[n];let u=!1;for(;!c();n++)if("/"===e[n]&&"\\"!==e[n-1]){for(u=!0;a!==n&&/^[a-z]$/.test(e[n+1])&&!c();)n++;break}a!==n&&u?(t=e.slice(a,n+1),v(on)):(t=i,v(),n=a)}else if(wn(b)){v();const r=n;if("/"===p)for(;n<e.length&&"\n"!==e[n];n++);else for(;n<e.length&&e[n-1]+e[n]!=="*/";n++);t=e.slice(r,n+1),v(dn)}else" "===i||"\n"===i?" "!==i||!gn(t)&&t&&!k?(v(),t=i,v()):(t+=i,"<"===p&&v()):l&&"}"===i?(v(),t=i,v(),l=!1):k&&!en.has(i)||(yn(i)===yn(t[t.length-1])||u())&&!nn.has(i)?t+=i:("</"===m&&(t=m),v(),"</"!==m&&(t=i),"</"===b||"/>"===b?(t=b,v(),n++):en.has(i)&&v())}var S,E;return v(),s}function kn(e,t={showLineNumbers:!1}){const n=An(e),r=[];let i=1;const s=[];function o(e){r.push(function(e){const n=t.showLineNumbers?`${lt(`${i}`.padEnd(2," "))} `:"";return i++,`${n}${e}`}(e.map((([e,t])=>{switch(e){case 0:case 4:return ht(t);case 1:case 2:case 7:return yt(t);case 3:return dt(t);case 5:return ft(t);case 6:return mt(t);case 8:return lt(t);default:return t}})).join("")))}for(const e of n){const[t,n]=e;if(9!==t)if(n.includes("\n")){const e=n.split("\n");for(let n=0;n<e.length;n++)s.push([t,e[n]]),n<e.length-1&&(o(s),s.length=0)}else s.push(e);else s.push([t,""]),o(s),s.length=0}return s.length>0&&o(s),r.join("\n")}var Rn=e=>(e.match(/'/g)||[]).length>(e.match(/"/g)||[]).length?"single":"double";async function Pn(e,t,n){const{name:r}=t,i=r,s=()=>{const e=[E.objectProperty(E.identifier("enabled"),E.literal(!0))];"next"===i&&n&&e.push(E.objectProperty(E.identifier("rsc"),E.literal(!0)));const t=E.objectExpression(e);return E.callExpression(E.memberExpression(E.identifier("MillionLint"),E.identifier(i),!1),[t])};function o(e){return E.callExpression(s(),[e])}const a={next:"plugins",remix:"plugins",astro:"integrations",webpack:"plugins",vite:"plugins",craco:"plugins",rollup:"plugins",esbuild:"plugins",rspack:"plugins",gatsby:"plugins"},l=()=>a[i],c=b.parse(e,{parser:{parse:e=>_(e,{sourceType:"module",plugins:["jsx","typescript"]})}});let u=!1;const p=new Map;function d(e,t){const n=t.arguments;if(n&&n.length>0){const r=n[0];if(S.ObjectExpression.check(r)){h(r)}else if(S.Identifier.check(r)){const n=r.name,i=p.get(n);i?h(i):f(e,t)}else S.CallExpression.check(r)||S.FunctionExpression.check(r)||S.ArrowFunctionExpression.check(r),f(e,t)}else f(e,t)}function f(e,t){const n=o(t);e.replace(n)}function h(e){const t=l();let n=!1;for(let r=0;r<e.properties.length;r++){const i=e.properties[r];if((S.Property.check(i)||S.ObjectProperty.check(i))&&(S.Identifier.check(i.key)&&i.key.name===t||S.StringLiteral.check(i.key)&&i.key.value===t)){n=!0;const e=i.value;S.ArrayExpression.check(e)?e.elements.unshift(s()):S.Expression.check(e)?i.value=E.arrayExpression([s(),e]):i.value=E.arrayExpression([s()]);break}}n||e.properties.push(E.objectProperty(E.identifier(t),E.arrayExpression([s()])))}v(c,{visitVariableDeclarator(e){const t=e.node;S.Identifier.check(t.id)&&t.init&&S.ObjectExpression.check(t.init)&&p.set(t.id.name,t.init),this.traverse(e)}}),v(c,{visitExportDefaultDeclaration(e){if(u)return!1;const t=e.node,n=t.declaration;if("next"===i){if(S.Expression.check(n))return t.declaration=o(n),u=!0,!1}else{if(S.CallExpression.check(n))return d(e.get("declaration"),n),u=!0,!1;if(S.ObjectExpression.check(n))return h(n),u=!0,!1;if(S.Identifier.check(n)){const e=p.get(n.name);return e?(h(e),u=!0,!1):(t.declaration=o(n),u=!0,!1)}}this.traverse(e)},visitExpressionStatement(e){if(u)return!1;const t=e.node.expression;if(S.AssignmentExpression.check(t)&&S.MemberExpression.check(t.left)&&S.Identifier.check(t.left.object)&&"module"===t.left.object.name&&S.Identifier.check(t.left.property)&&"exports"===t.left.property.name){const n=t.right;if("next"===i){if(S.Expression.check(n))return t.right=o(n),u=!0,!1}else{if(S.CallExpression.check(n)){const t=n.callee;return S.Identifier.check(t)&&"defineConfig"===t.name?(d(e.get("expression").get("right"),n),u=!0,!1):(function(e,t){const n=E.identifier("config"),r=E.variableDeclaration("const",[E.variableDeclarator(n,t)]),i=E.expressionStatement(E.assignmentExpression("=",E.memberExpression(n,E.identifier(l()),!1),E.arrayExpression([s(),E.spreadElement(E.logicalExpression("||",E.memberExpression(n,E.identifier(l()),!1),E.arrayExpression([])))]))),o=E.expressionStatement(E.assignmentExpression("=",E.memberExpression(E.identifier("module"),E.identifier("exports"),!1),n));e.replace(r,i,o)}(e,n),u=!0,!1)}if(S.ObjectExpression.check(n))return h(n),u=!0,!1;if(S.Identifier.check(n)){const e=p.get(n.name);return e?(h(e),u=!0,!1):(t.right=o(n),u=!0,!1)}}}this.traverse(e)}});return b.print(c,{quote:Rn(e)}).code}var Cn=(e,n)=>o.gen((function*(){const r=t.join(n,e.configFilePath);return yield*o.tryPromise({try:()=>u.readFile(r,{encoding:"utf-8"}),catch:e=>new jn({message:vt(e,{error:e=>`Could not read file at ${r}: ${e.message}`,unknown:()=>`Could not read file at ${r}`})})})})),On=e=>o.gen((function*(){if(e.skipUpdateConfigFile)return;const n=qn.CWD,i=e.buildTool,s=yield*Cn(i,n);if(s.includes("@million/lint")&&s.includes("MillionLint"))return void r.note(pt(`@million/lint is already configured in ${i.configFilePath}.`));yield*o.tryPromise({try:()=>r.confirm({message:`Setup Million Lint in your ${t.basename(i.configFilePath)}?`,initialValue:!0}),catch:e=>new Tn({logMessage:"At automatic setup confirm prompt",context:{error:e}})}).pipe(zn("should-modify-build-file"));const a=s,l=t.join(n,i.configFilePath),c=r.spinner(),p=function(e){const t=[/module\.exports\s*=/,/exports\./,/require\(.+\)/];for(const n of t)if(n.test(e))return"cjs";const n=[/export\s+default/,/import\s.+\s+from\s+['"]/,/export\s+\{[^}]*\}\s*;/,/export\s+const\s+|export\s+let\s+|export\s+var/];for(const t of n)if(t.test(e))return"esm";return"unknown"}(s);if(Wn({type:"info",event:"wizard-modify-config",properties:{body:{type:p,oldCode:a,filePath:l}}}),"unknown"===p)return yield*new Ln({message:`Unknown module type in ${i.configFilePath}, aborting`});const f=("esm"===p?'import MillionLint from "@million/lint";\n':'const MillionLint = require("@million/lint");\n')+s,h="next"===i.name?yield*(g=t.dirname(l),o.gen((function*(){return d.existsSync(t.join(g,"pages"))?"pages":d.existsSync(t.join(g,"app"))?"app":d.existsSync(t.join(g,"src/pages"))?"pages":d.existsSync(t.join(g,"src/app"))?"app":yield*o.tryPromise({try:()=>r.select({message:"Will you use app Router or pages Router?",options:[{label:"App Router",value:"app"},{label:"Pages Router",value:"pages"}]}),catch:e=>new Tn({context:{error:e}})}).pipe(zn("pages-or-app-router"))}))):void 0;var g;c.start(`Modifying config file ${gt(i.configFilePath)}...`);const m=i.millionLint.configFileContent,_=i.millionLint.configFileContentRSC,b="app"===h?_:m;if("next"===i.name){const e=t.join(n,".next");(yield*o.tryPromise({try:()=>u.exists(e),catch:()=>new Tn({logMessage:`Could not read file at ${e}`})}).pipe(o.catchAll((()=>o.succeed(!1)))))&&(yield*o.tryPromise({try:()=>u.rmdir(e,{recursive:!0}),catch:()=>new Tn({logMessage:`Could not delete ${e}`})}).pipe(o.catchAll((()=>o.succeed(!1)))))}const v=yield*o.tryPromise({try:()=>Pn(f,i,"app"===h),catch:e=>new Tn({userMessage:`Encountered a fatal error attempting to transform ${i.configFilePath}`,context:{error:e}})}).pipe(o.flatMap((e=>e?o.succeed(e):new Tn({userMessage:`Encountered a fatal error attempting to transform ${i.configFilePath}`})))),S=t.extname(l),E=`${t.basename(l,S)}-temp${S}`,x=y.tmpdir(),w=t.join(x,E);var A,k;yield*o.tryPromise({try:()=>u.writeFile(w,v,{encoding:"utf-8",flag:"w"}),catch:e=>new jn({message:vt(e,{error:e=>`Failed to update ${i.configFilePath}: ${e.message}`,unknown:()=>`Failed to update ${i.configFilePath}`})})}),_t(a,v,i.configFilePath),qn.IDE_NAME&&(yield*(A=l,k=w,o.onError(o.tryPromise((()=>bt(`${qn.CLI_COMMAND} --diff ${A} ${k}`))),(e=>(Wn({event:"wizard-open-diff-failed",message:`Failed to open diff in ${qn.IDE_NAME}`,properties:{body:e.toJSON()}}),o.succeed(null)))))),c.stop();const R=o.gen((function*(){yield*o.tryPromise({try:()=>u.unlink(w),catch:e=>new jn({message:vt(e,{error:e=>`Could not revert changes to ${i.configFilePath}: ${e.message}`,unknown:()=>`Could not revert changes to ${i.configFilePath}`})})}),r.log.info(`Reverted changes to ${t.relative(n,l)}`),qn.IDE_NAME&&(yield*o.tryPromise((()=>bt(`${qn.CLI_COMMAND} ${l}`))).pipe(o.catchAll((()=>o.succeed(null))))),yield*new $n({userMessage:`Reverted the changes.\n\nHere is an installation reference:\n\n${kn(b,{showLineNumbers:!0})}`})}));(yield*o.tryPromise({try:()=>r.confirm({message:"Is the config file setup correctly?",initialValue:!0}),catch:()=>new Tn({logMessage:"Does this config file look good confirmation"})}).pipe(zn("aborted-config-file-transform",R)))||(yield*R),yield*o.tryPromise({try:()=>u.rename(w,l),catch:e=>new jn({message:vt(e,{error:e=>`Failed to update ${l}: ${e.message}`,unknown:()=>`Failed to update ${l}`})})}),qn.IDE_NAME&&(yield*o.tryPromise((()=>bt(`${qn.CLI_COMMAND} ${l}`))).pipe(o.catchAll((()=>o.succeed(null)))))})),$n=class extends(a.TaggedError("CancelFailure")){},Tn=class extends(a.TaggedError("InternalFailure")){},Ln=class extends(a.TaggedError("BadConfigurationFailure")){},jn=class extends(a.TaggedError("OSError")){},Mn=class{constructor(e,t,n){this._tag="GroupCancelError",this.capturedError=e,this.results=n,this.telemetryStoreJSON=t}},Fn=(e,t)=>o.gen((function*(){r.intro(ft(`⚡ ${at(e)} ${lt(t||"")}`)),Wn({type:"info",event:"wizard-start",properties:{body:{name:e,version:t,store:JSON.stringify(qn)}}});const n={},i=yield*o.mapError(At,(e=>new Mn(e,JSON.stringify(qn),n)));n.vscode=i;const s=yield*o.mapError(Xt,(e=>new Mn(e,JSON.stringify(qn),n)));n.check=s;const a=yield*o.mapError(Jt(s.packageJsonPath),(e=>new Mn(e,JSON.stringify(qn),n)));if(n.install=a,!s.skipUpdateConfigFile){const e=yield*o.mapError(On({buildTool:s.buildTool,skipUpdateConfigFile:s.skipUpdateConfigFile}),(e=>new Mn(e,JSON.stringify(qn),n)));n["update-config-file"]=e}const l=yield*o.mapError(Zt,(e=>new Mn(e,JSON.stringify(qn),n)));n.otherResult=l,r.outro(`${pt(at("✓ "))} You're all set!`)}));var Nn=(e=>{const n=y.homedir();switch(process.platform){case"darwin":return t.join(n,"Library","Preferences",e);case"win32":return(()=>{const{APPDATA:r=t.join(n,"AppData","Roaming")}=process.env;return t.join(r,e,"Config")})();default:return(()=>{const{XDG_CONFIG_HOME:r=t.join(n,".config")}=process.env;return t.join(r,e)})()}})("million-lint"),In=i(),Hn=async()=>{if(!In)try{if((await u.stat(t.join(Nn,"machineId.txt"))).isFile()){const e=await u.readFile(t.join(Nn,"machineId.txt"),"utf8");In=e||In}}catch(e){}return In},Dn=new x({token:"xaat-bdc47730-5a10-4b01-b47c-e6b9615dc49e"}),Bn=Dn.flush,Un=async(e,...t)=>{Dn.ingest("install",{level:e,env:qn,machineId:await Hn(),message:JSON.stringify(t)}),await Bn()},Gn=`r-${function(e=21){var t;t=e-=0,!w||w.length<t?(w=Buffer.allocUnsafe(t*tt),s.getRandomValues(w),A=0):A+t>w.length&&(s.getRandomValues(w),A=0);let n="";for(let r=(A+=t)-e;r<A;r++)n+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&w[r]];return n}(10)}`;function Wn({type:e="error",distinctId:t=Gn,event:n,message:r,properties:i={}}){Un(e,r?{distinctId:t,event:n,message:r,...i}:{distinctId:t,event:n,...i})}var Vn=async()=>{try{await Bn()}catch{process.exit(1)}};function zn(e,t){return function(n){return o.gen((function*(){const i=yield*n;return r.isCancel(i)&&(t&&(yield*t),yield*new $n({logMessage:e})),i}))}}var qn={NAME:"",CWD:n.cwd(),CLI_COMMAND:"code",IDE_NAME:null,IDE_VERSION:null,MILLION_VERSION:null,INSTALL_VERSION:null,PACKAGE_MANAGER:"npm",BUILD_TOOL:null,INIT_CRACO:!1};async function Kn(e,i=n.env.VERSION){try{qn.NAME=e||"",qn.INSTALL_VERSION=i||"",qn.CWD=t.join(n.cwd()),await async function(e,t){await o.runPromiseExit(o.match(Fn(e,t),{onSuccess:()=>{Wn({type:"info",event:"wizard-complete",properties:{body:!0}}),Vn().then((()=>n.exit(0)))},onFailure:e=>{if(!e.capturedError)return;let t="Setup cancelled.";switch(e.capturedError._tag){case"BadConfigurationFailure":t=e.capturedError.message,e.capturedError.fixHint&&(t+="\n",t+=e.capturedError.fixHint),Wn({event:"wizard-bad-configuration",type:"info",properties:{body:{context:e.capturedError.context,results:e.results}}});break;case"CancelFailure":e.capturedError.userMessage&&(t=e.capturedError.userMessage),Wn({event:"wizard-canceled",type:"info",properties:{body:{context:e.capturedError.context,results:e.results}}});break;case"InternalFailure":e.capturedError.userMessage&&(t=e.capturedError.userMessage),Wn({event:"wizard-internal-failure",type:"error",properties:{body:{context:e.capturedError.context,results:e.results}}});break;case"OSError":t=e.capturedError.message,Wn({event:"wizard-os-error",type:"info",properties:{body:{context:e.capturedError.context,results:e.results}}});break;case"TimeoutException":t="Aborting, timed out",Wn({event:"wizard-timeout",type:"error",properties:{body:{capturedError:e.capturedError}}});break;case"UnknownException":t="Aborting, encountered a fatal error",Wn({event:"wizard-unknown-exception",type:"error",properties:{body:{capturedError:e.capturedError}}}),Wn({event:"wizard-timeout",type:"error",properties:{body:{capturedError:e.capturedError}}})}r.cancel(`${t}\n\n${at(`⚠️ Something went wrong? Call us: ${ct("https://cal.com/aiden/support")}`)}`),Vn().then((()=>n.exit(1)))}})).catch((e=>{Wn({type:"error",event:"wizard-defect",properties:{body:e}}),r.log.error("An unexpected error occurred")}))}(e,i??"")}catch(e){Wn({event:"wizard-error",message:e,properties:{body:e}})}}
/*! Bundled license information:

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel/index.js:
  (*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/export{qn as TelemetryStore,Kn as install};